{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\rachn\\\\OneDrive\\\\Desktop\\\\Video-Meeting\\\\src\\\\Video.js\";\nimport React, { Component } from 'react';\nimport io from 'socket.io-client';\nimport faker from \"faker\";\nimport { IconButton, Badge, Input, Button } from '@material-ui/core';\nimport VideocamIcon from '@material-ui/icons/Videocam';\nimport VideocamOffIcon from '@material-ui/icons/VideocamOff';\nimport MicIcon from '@material-ui/icons/Mic';\nimport MicOffIcon from '@material-ui/icons/MicOff';\nimport ScreenShareIcon from '@material-ui/icons/ScreenShare';\nimport StopScreenShareIcon from '@material-ui/icons/StopScreenShare';\nimport CallEndIcon from '@material-ui/icons/CallEnd';\nimport ChatIcon from '@material-ui/icons/Chat';\nimport { styled } from '@mui/material/styles';\nimport Tooltip, { tooltipClasses } from '@mui/material/Tooltip';\nimport { useReactMediaRecorder } from \"react-media-recorder\";\nimport { message } from 'antd';\nimport 'antd/dist/antd.css';\nimport { Row } from 'reactstrap';\nimport Modal from 'react-bootstrap/Modal';\nimport 'bootstrap/dist/css/bootstrap.css';\nimport \"./Video.css\";\nimport home from './images/logo.png';\nconst RightLightTooltip = styled(_ref => {\n  let {\n    className,\n    ...props\n  } = _ref;\n  return /*#__PURE__*/React.createElement(Tooltip, Object.assign({}, props, {\n    classes: {\n      popper: className\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 28,\n      columnNumber: 2\n    }\n  }));\n})(_ref2 => {\n  let {\n    theme\n  } = _ref2;\n  return {\n    [`& .${tooltipClasses.tooltip}`]: {\n      backgroundColor: theme.palette.common.white,\n      color: 'rgba(0, 0, 0, 0.87)',\n      boxShadow: theme.shadows[1],\n      fontSize: 11\n    }\n  };\n});\nconst server_url = process.env.NODE_ENV === 'production' ? 'https://video.tejas_sdp.com' : \"http://localhost:4001\";\nvar connections = {};\nconst peerConnectionConfig = {\n  'iceServers': [// { 'urls': 'stun:stun.services.mozilla.com' },\n  {\n    'urls': 'stun:stun.l.google.com:19302'\n  }]\n};\nvar socket = null;\nvar socketId = null;\nvar elms = 0;\n\nclass Video extends Component {\n  constructor(props) {\n    var _this;\n\n    super(props);\n    _this = this;\n\n    this.getPermissions = async () => {\n      try {\n        await navigator.mediaDevices.getUserMedia({\n          video: true\n        }).then(() => this.videoAvailable = true).catch(() => this.videoAvailable = false);\n        await navigator.mediaDevices.getUserMedia({\n          audio: true\n        }).then(() => this.audioAvailable = true).catch(() => this.audioAvailable = false);\n\n        if (navigator.mediaDevices.getDisplayMedia) {\n          this.setState({\n            screenAvailable: true\n          });\n        } else {\n          this.setState({\n            screenAvailable: false\n          });\n        }\n\n        if (this.videoAvailable || this.audioAvailable) {\n          navigator.mediaDevices.getUserMedia({\n            video: this.videoAvailable,\n            audio: this.audioAvailable\n          }).then(stream => {\n            window.localStream = stream;\n            this.localVideoref.current.srcObject = stream;\n          }).then(stream => {}).catch(e => console.log(e));\n        }\n      } catch (e) {\n        console.log(e);\n      }\n    };\n\n    this.getMedia = () => {\n      this.setState({\n        video: this.videoAvailable,\n        audio: this.audioAvailable\n      }, () => {\n        this.getUserMedia();\n        this.connectToSocketServer();\n      });\n    };\n\n    this.getUserMedia = () => {\n      if (this.state.video && this.videoAvailable || this.state.audio && this.audioAvailable) {\n        navigator.mediaDevices.getUserMedia({\n          video: this.state.video,\n          audio: this.state.audio\n        }).then(this.getUserMediaSuccess).then(stream => {}).catch(e => console.log(e));\n      } else {\n        try {\n          let tracks = this.localVideoref.current.srcObject.getTracks();\n          tracks.forEach(track => track.stop());\n        } catch (e) {}\n      }\n    };\n\n    this.getUserMediaSuccess = stream => {\n      try {\n        window.localStream.getTracks().forEach(track => track.stop());\n      } catch (e) {\n        console.log(e);\n      }\n\n      window.localStream = stream;\n      this.localVideoref.current.srcObject = stream;\n\n      for (let id in connections) {\n        if (id === socketId) continue;\n        connections[id].addStream(window.localStream);\n        connections[id].createOffer().then(description => {\n          connections[id].setLocalDescription(description).then(() => {\n            socket.emit('signal', id, JSON.stringify({\n              'sdp': connections[id].localDescription\n            }));\n          }).catch(e => console.log(e));\n        });\n      }\n\n      stream.getTracks().forEach(track => track.onended = () => {\n        this.setState({\n          video: false,\n          audio: false\n        }, () => {\n          try {\n            let tracks = this.localVideoref.current.srcObject.getTracks();\n            tracks.forEach(track => track.stop());\n          } catch (e) {\n            console.log(e);\n          }\n\n          let blackSilence = function () {\n            return new MediaStream([_this.black(...arguments), _this.silence()]);\n          };\n\n          window.localStream = blackSilence();\n          this.localVideoref.current.srcObject = window.localStream;\n\n          for (let id in connections) {\n            connections[id].addStream(window.localStream);\n            connections[id].createOffer().then(description => {\n              connections[id].setLocalDescription(description).then(() => {\n                socket.emit('signal', id, JSON.stringify({\n                  'sdp': connections[id].localDescription\n                }));\n              }).catch(e => console.log(e));\n            });\n          }\n        });\n      });\n    };\n\n    this.getDislayMedia = () => {\n      if (this.state.screen) {\n        if (navigator.mediaDevices.getDisplayMedia) {\n          navigator.mediaDevices.getDisplayMedia({\n            video: true,\n            audio: true\n          }).then(this.getDislayMediaSuccess).then(stream => {}).catch(e => console.log(e));\n        }\n      }\n    };\n\n    this.getDislayMediaSuccess = stream => {\n      try {\n        window.localStream.getTracks().forEach(track => track.stop());\n      } catch (e) {\n        console.log(e);\n      }\n\n      window.localStream = stream;\n      this.localVideoref.current.srcObject = stream;\n\n      for (let id in connections) {\n        if (id === socketId) continue;\n        connections[id].addStream(window.localStream);\n        connections[id].createOffer().then(description => {\n          connections[id].setLocalDescription(description).then(() => {\n            socket.emit('signal', id, JSON.stringify({\n              'sdp': connections[id].localDescription\n            }));\n          }).catch(e => console.log(e));\n        });\n      }\n\n      stream.getTracks().forEach(track => track.onended = () => {\n        this.setState({\n          screen: false\n        }, () => {\n          try {\n            let tracks = this.localVideoref.current.srcObject.getTracks();\n            tracks.forEach(track => track.stop());\n          } catch (e) {\n            console.log(e);\n          }\n\n          let blackSilence = function () {\n            return new MediaStream([_this.black(...arguments), _this.silence()]);\n          };\n\n          window.localStream = blackSilence();\n          this.localVideoref.current.srcObject = window.localStream;\n          this.getUserMedia();\n        });\n      });\n    };\n\n    this.gotMessageFromServer = (fromId, message) => {\n      var signal = JSON.parse(message);\n\n      if (fromId !== socketId) {\n        if (signal.sdp) {\n          connections[fromId].setRemoteDescription(new RTCSessionDescription(signal.sdp)).then(() => {\n            if (signal.sdp.type === 'offer') {\n              connections[fromId].createAnswer().then(description => {\n                connections[fromId].setLocalDescription(description).then(() => {\n                  socket.emit('signal', fromId, JSON.stringify({\n                    'sdp': connections[fromId].localDescription\n                  }));\n                }).catch(e => console.log(e));\n              }).catch(e => console.log(e));\n            }\n          }).catch(e => console.log(e));\n        }\n\n        if (signal.ice) {\n          connections[fromId].addIceCandidate(new RTCIceCandidate(signal.ice)).catch(e => console.log(e));\n        }\n      }\n    };\n\n    this.changeCssVideos = main => {\n      let widthMain = main.offsetWidth;\n      let minWidth = \"30%\";\n\n      if (widthMain * 30 / 100 < 300) {\n        minWidth = \"300px\";\n      }\n\n      let minHeight = \"40%\";\n      let height = String(100 / elms) + \"%\";\n      let width = \"\";\n\n      if (elms === 0 || elms === 1) {\n        width = \"100%\";\n        height = \"100%\";\n      } else if (elms === 2) {\n        width = \"45%\";\n        height = \"100%\";\n      } else if (elms === 3 || elms === 4) {\n        width = \"35%\";\n        height = \"50%\";\n      } else {\n        width = String(100 / elms) + \"%\";\n      }\n\n      let videos = main.querySelectorAll(\"video\");\n\n      for (let a = 0; a < videos.length; ++a) {\n        videos[a].style.minWidth = minWidth;\n        videos[a].style.minHeight = minHeight;\n        videos[a].style.setProperty(\"width\", width);\n        videos[a].style.setProperty(\"height\", height);\n      }\n\n      return {\n        minWidth,\n        minHeight,\n        width,\n        height\n      };\n    };\n\n    this.connectToSocketServer = () => {\n      socket = io.connect(server_url, {\n        secure: true\n      });\n      socket.on('signal', this.gotMessageFromServer);\n      socket.on('connect', () => {\n        socket.emit('join-call', window.location.href);\n        socketId = socket.id;\n        socket.on('chat-message', this.addMessage);\n        socket.on('user-left', id => {\n          let video = document.querySelector(`[data-socket=\"${id}\"]`);\n\n          if (video !== null) {\n            elms--;\n            video.parentNode.removeChild(video);\n            let main = document.getElementById('main');\n            this.changeCssVideos(main);\n          }\n        });\n        socket.on('user-joined', (id, clients) => {\n          clients.forEach(socketListId => {\n            connections[socketListId] = new RTCPeerConnection(peerConnectionConfig); // Wait for their ice candidate       \n\n            connections[socketListId].onicecandidate = function (event) {\n              if (event.candidate != null) {\n                socket.emit('signal', socketListId, JSON.stringify({\n                  'ice': event.candidate\n                }));\n              }\n            }; // Wait for their video stream\n\n\n            connections[socketListId].onaddstream = event => {\n              // TODO mute button, full screen button\n              var searchVidep = document.querySelector(`[data-socket=\"${socketListId}\"]`);\n\n              if (searchVidep !== null) {\n                // if i don't do this check it make an empyt square\n                searchVidep.srcObject = event.stream;\n              } else {\n                elms = clients.length;\n                let main = document.getElementById('main');\n                let cssMesure = this.changeCssVideos(main);\n                let video = document.createElement('video');\n                let css = {\n                  minWidth: cssMesure.minWidth,\n                  minHeight: cssMesure.minHeight,\n                  maxHeight: \"100%\",\n                  margin: \"10px\",\n                  borderStyle: \"solid\",\n                  borderColor: \"#bdbdbd\",\n                  objectFit: \"fill\"\n                };\n\n                for (let i in css) video.style[i] = css[i];\n\n                video.style.setProperty(\"width\", cssMesure.width);\n                video.style.setProperty(\"height\", cssMesure.height);\n                video.setAttribute('data-socket', socketListId);\n                video.srcObject = event.stream;\n                video.autoplay = true;\n                video.playsinline = true;\n                main.appendChild(video);\n              }\n            }; // Add the local video stream\n\n\n            if (window.localStream !== undefined && window.localStream !== null) {\n              connections[socketListId].addStream(window.localStream);\n            } else {\n              let blackSilence = function () {\n                return new MediaStream([_this.black(...arguments), _this.silence()]);\n              };\n\n              window.localStream = blackSilence();\n              connections[socketListId].addStream(window.localStream);\n            }\n          });\n\n          if (id === socketId) {\n            for (let id2 in connections) {\n              if (id2 === socketId) continue;\n\n              try {\n                connections[id2].addStream(window.localStream);\n              } catch (e) {}\n\n              connections[id2].createOffer().then(description => {\n                connections[id2].setLocalDescription(description).then(() => {\n                  socket.emit('signal', id2, JSON.stringify({\n                    'sdp': connections[id2].localDescription\n                  }));\n                }).catch(e => console.log(e));\n              });\n            }\n          }\n        });\n      });\n    };\n\n    this.silence = () => {\n      let ctx = new AudioContext();\n      let oscillator = ctx.createOscillator();\n      let dst = oscillator.connect(ctx.createMediaStreamDestination());\n      oscillator.start();\n      ctx.resume();\n      return Object.assign(dst.stream.getAudioTracks()[0], {\n        enabled: false\n      });\n    };\n\n    this.black = function () {\n      let {\n        width = 640,\n        height = 480\n      } = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      let canvas = Object.assign(document.createElement(\"canvas\"), {\n        width,\n        height\n      });\n      canvas.getContext('2d').fillRect(0, 0, width, height);\n      let stream = canvas.captureStream();\n      return Object.assign(stream.getVideoTracks()[0], {\n        enabled: false\n      });\n    };\n\n    this.handleVideo = () => this.setState({\n      video: !this.state.video\n    }, () => this.getUserMedia());\n\n    this.handleAudio = () => this.setState({\n      audio: !this.state.audio\n    }, () => this.getUserMedia());\n\n    this.handleScreen = () => this.setState({\n      screen: !this.state.screen\n    }, () => this.getDislayMedia());\n\n    this.handleEndCall = () => {\n      try {\n        let tracks = this.localVideoref.current.srcObject.getTracks();\n        tracks.forEach(track => track.stop());\n      } catch (e) {}\n\n      window.location.href = \"/\";\n    };\n\n    this.openChat = () => this.setState({\n      showModal: true,\n      newmessages: 0\n    });\n\n    this.closeChat = () => this.setState({\n      showModal: false\n    });\n\n    this.handleMessage = e => this.setState({\n      message: e.target.value\n    });\n\n    this.addMessage = (data, sender, socketIdSender) => {\n      this.setState(prevState => ({\n        messages: [...prevState.messages, {\n          \"sender\": sender,\n          \"data\": data\n        }]\n      }));\n\n      if (socketIdSender !== socketId) {\n        this.setState({\n          newmessages: this.state.newmessages + 1\n        });\n      }\n    };\n\n    this.handleUsername = e => this.setState({\n      username: e.target.value\n    });\n\n    this.sendMessage = () => {\n      socket.emit('chat-message', this.state.message, this.state.username);\n      this.setState({\n        message: \"\",\n        sender: this.state.username\n      });\n    };\n\n    this.copyUrl = () => {\n      let text = window.location.href;\n\n      if (!navigator.clipboard) {\n        let textArea = document.createElement(\"textarea\");\n        textArea.value = text;\n        document.body.appendChild(textArea);\n        textArea.focus();\n        textArea.select();\n\n        try {\n          document.execCommand('copy');\n          message.success(\"Link copied to clipboard!\");\n        } catch (err) {\n          message.error(\"Failed to copy\");\n        }\n\n        document.body.removeChild(textArea);\n        return;\n      }\n\n      navigator.clipboard.writeText(text).then(function () {\n        message.success(\"Link copied to clipboard!\");\n      }, () => {\n        message.error(\"Failed to copy\");\n      });\n    };\n\n    this.connect = () => this.setState({\n      askForUsername: false\n    }, () => this.getMedia());\n\n    this.isChrome = function () {\n      let userAgent = (navigator && (navigator.userAgent || '')).toLowerCase();\n      let vendor = (navigator && (navigator.vendor || '')).toLowerCase();\n      let matchChrome = /google inc/.test(vendor) ? userAgent.match(/(?:chrome|crios)\\/(\\d+)/) : null; // let matchFirefox = userAgent.match(/(?:firefox|fxios)\\/(\\d+)/)\n      // return matchChrome !== null || matchFirefox !== null\n\n      return matchChrome !== null;\n    };\n\n    this.localVideoref = React.createRef();\n    this.videoAvailable = false;\n    this.audioAvailable = false;\n    this.state = {\n      video: false,\n      audio: false,\n      screen: false,\n      showModal: false,\n      screenAvailable: false,\n      messages: [],\n      message: \"\",\n      newmessages: 0,\n      askForUsername: true,\n      username: faker.internet.userName()\n    };\n    connections = {};\n    this.getPermissions();\n  }\n\n  render() {\n    if (this.isChrome() === false) {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        style: {\n          background: \"white\",\n          width: \"30%\",\n          height: \"auto\",\n          padding: \"20px\",\n          minWidth: \"400px\",\n          textAlign: \"center\",\n          margin: \"auto\",\n          marginTop: \"50px\",\n          justifyContent: \"center\"\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 463,\n          columnNumber: 5\n        }\n      }, /*#__PURE__*/React.createElement(\"h1\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 465,\n          columnNumber: 6\n        }\n      }, \"Sorry, this works only with Google Chrome\"));\n    }\n\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 470,\n        columnNumber: 4\n      }\n    }, /*#__PURE__*/React.createElement(\"nav\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 471,\n        columnNumber: 5\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"left-item\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 472,\n        columnNumber: 6\n      }\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      src: home,\n      alt: \"home\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 473,\n        columnNumber: 7\n      }\n    }))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"sidenav\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 476,\n        columnNumber: 5\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"sidenav-items\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 477,\n        columnNumber: 6\n      }\n    }, /*#__PURE__*/React.createElement(RightLightTooltip, {\n      title: \"About Us\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 478,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"faicon\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 479,\n        columnNumber: 8\n      }\n    }, /*#__PURE__*/React.createElement(\"i\", {\n      className: \"far fa-question-circle\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 479,\n        columnNumber: 32\n      }\n    }))), /*#__PURE__*/React.createElement(RightLightTooltip, {\n      title: \"Comment Us\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 481,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"faicon\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 482,\n        columnNumber: 8\n      }\n    }, /*#__PURE__*/React.createElement(\"i\", {\n      className: \"far fa-comment-alt\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 482,\n        columnNumber: 32\n      }\n    }))), /*#__PURE__*/React.createElement(RightLightTooltip, {\n      title: \"Settings\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 484,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"faicon\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 485,\n        columnNumber: 8\n      }\n    }, /*#__PURE__*/React.createElement(\"i\", {\n      className: \"fa fa-cog\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 485,\n        columnNumber: 32\n      }\n    }))), /*#__PURE__*/React.createElement(RightLightTooltip, {\n      title: \"More Options\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 487,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"faicon\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 488,\n        columnNumber: 8\n      }\n    }, /*#__PURE__*/React.createElement(\"i\", {\n      className: \"fa fa-ellipsis-v\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 488,\n        columnNumber: 32\n      }\n    }))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"url-copy\",\n      style: {\n        paddingTop: \"0px\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 490,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(Input, {\n      style: {\n        fontSize: '12px',\n        wordWrap: 'wrap'\n      },\n      value: window.location.href,\n      disable: \"true\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 491,\n        columnNumber: 8\n      }\n    }), /*#__PURE__*/React.createElement(\"button\", {\n      className: \"connect\",\n      onClick: this.copyUrl,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 492,\n        columnNumber: 8\n      }\n    }, \"Copy invite link\")))), this.state.askForUsername === true ? /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 498,\n        columnNumber: 6\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      style: {\n        background: \"white\",\n        width: \"30%\",\n        height: \"auto\",\n        padding: \"20px\",\n        minWidth: \"400px\",\n        textAlign: \"center\",\n        margin: \"auto\",\n        marginTop: \"50px\",\n        justifyContent: \"center\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 499,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"p\", {\n      style: {\n        margin: 0,\n        fontWeight: \"bold\",\n        paddingRight: \"50px\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 501,\n        columnNumber: 8\n      }\n    }, \"Set your username\"), /*#__PURE__*/React.createElement(Input, {\n      placeholder: \"Username\",\n      value: this.state.username,\n      onChange: e => this.handleUsername(e),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 502,\n        columnNumber: 8\n      }\n    }), /*#__PURE__*/React.createElement(\"button\", {\n      className: \"connect\",\n      onClick: this.connect,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 503,\n        columnNumber: 8\n      }\n    }, \"Connect\")), /*#__PURE__*/React.createElement(\"div\", {\n      style: {\n        justifyContent: \"center\",\n        textAlign: \"center\",\n        paddingTop: \"40px\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 506,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"video\", {\n      id: \"my-video\",\n      ref: this.localVideoref,\n      autoPlay: true,\n      muted: true,\n      style: {\n        borderStyle: \"solid\",\n        borderColor: \"#bdbdbd\",\n        objectFit: \"fill\",\n        width: \"40%\",\n        height: \"400px\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 507,\n        columnNumber: 8\n      }\n    }))) : /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 512,\n        columnNumber: 6\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"btn-down\",\n      style: {\n        backgroundColor: \"whitesmoke\",\n        color: \"whitesmoke\",\n        textAlign: \"center\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 513,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(IconButton, {\n      style: {\n        color: \"#424242\"\n      },\n      onClick: this.handleVideo,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 514,\n        columnNumber: 8\n      }\n    }, this.state.video === true ? /*#__PURE__*/React.createElement(VideocamIcon, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 515,\n        columnNumber: 40\n      }\n    }) : /*#__PURE__*/React.createElement(VideocamOffIcon, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 515,\n        columnNumber: 59\n      }\n    })), /*#__PURE__*/React.createElement(IconButton, {\n      style: {\n        color: \"#f44336\"\n      },\n      onClick: this.handleEndCall,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 518,\n        columnNumber: 8\n      }\n    }, /*#__PURE__*/React.createElement(CallEndIcon, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 519,\n        columnNumber: 9\n      }\n    })), /*#__PURE__*/React.createElement(IconButton, {\n      style: {\n        color: \"#424242\"\n      },\n      onClick: this.handleAudio,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 522,\n        columnNumber: 8\n      }\n    }, this.state.audio === true ? /*#__PURE__*/React.createElement(MicIcon, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 523,\n        columnNumber: 38\n      }\n    }) : /*#__PURE__*/React.createElement(MicOffIcon, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 523,\n        columnNumber: 52\n      }\n    })), this.state.screenAvailable === true ? /*#__PURE__*/React.createElement(IconButton, {\n      style: {\n        color: \"#424242\"\n      },\n      onClick: this.handleScreen,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 527,\n        columnNumber: 9\n      }\n    }, this.state.screen === true ? /*#__PURE__*/React.createElement(ScreenShareIcon, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 528,\n        columnNumber: 40\n      }\n    }) : /*#__PURE__*/React.createElement(StopScreenShareIcon, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 528,\n        columnNumber: 62\n      }\n    })) : null, /*#__PURE__*/React.createElement(Badge, {\n      badgeContent: this.state.newmessages,\n      max: 999,\n      color: \"secondary\",\n      onClick: this.openChat,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 532,\n        columnNumber: 8\n      }\n    }, /*#__PURE__*/React.createElement(IconButton, {\n      style: {\n        color: \"#424242\"\n      },\n      onClick: this.openChat,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 533,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(ChatIcon, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 534,\n        columnNumber: 10\n      }\n    })))), /*#__PURE__*/React.createElement(Modal, {\n      show: this.state.showModal,\n      onHide: this.closeChat,\n      style: {\n        zIndex: \"999999\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 539,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(Modal.Header, {\n      closeButton: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 540,\n        columnNumber: 8\n      }\n    }, /*#__PURE__*/React.createElement(Modal.Title, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 541,\n        columnNumber: 9\n      }\n    }, \"Chat Room\")), /*#__PURE__*/React.createElement(Modal.Body, {\n      style: {\n        overflow: \"auto\",\n        overflowY: \"auto\",\n        height: \"400px\",\n        textAlign: \"left\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 543,\n        columnNumber: 8\n      }\n    }, this.state.messages.length > 0 ? this.state.messages.map((item, index) => /*#__PURE__*/React.createElement(\"div\", {\n      key: index,\n      style: {\n        textAlign: \"left\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 545,\n        columnNumber: 10\n      }\n    }, /*#__PURE__*/React.createElement(\"p\", {\n      style: {\n        wordBreak: \"break-all\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 546,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"b\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 546,\n        columnNumber: 49\n      }\n    }, item.sender), \": \", item.data))) : /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 548,\n        columnNumber: 14\n      }\n    }, \"No message yet\")), /*#__PURE__*/React.createElement(Modal.Footer, {\n      className: \"div-send-msg\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 550,\n        columnNumber: 8\n      }\n    }, /*#__PURE__*/React.createElement(Input, {\n      placeholder: \"Message\",\n      value: this.state.message,\n      onChange: e => this.handleMessage(e),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 551,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(Button, {\n      variant: \"contained\",\n      color: \"primary\",\n      onClick: this.sendMessage,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 552,\n        columnNumber: 9\n      }\n    }, \"Send\"))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"container\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 556,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(Row, {\n      id: \"main\",\n      className: \"flex-container\",\n      style: {\n        margin: 0,\n        padding: 0\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 559,\n        columnNumber: 8\n      }\n    }, /*#__PURE__*/React.createElement(\"video\", {\n      id: \"my-video\",\n      ref: this.localVideoref,\n      autoPlay: true,\n      muted: true,\n      style: {\n        borderStyle: \"solid\",\n        borderColor: \"#bdbdbd\",\n        margin: \"10px\",\n        objectFit: \"fill\",\n        width: \"70%\",\n        height: \"100%\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 560,\n        columnNumber: 9\n      }\n    })))));\n  }\n\n}\n\nexport default Video;","map":{"version":3,"sources":["C:/Users/rachn/OneDrive/Desktop/Video-Meeting/src/Video.js"],"names":["React","Component","io","faker","IconButton","Badge","Input","Button","VideocamIcon","VideocamOffIcon","MicIcon","MicOffIcon","ScreenShareIcon","StopScreenShareIcon","CallEndIcon","ChatIcon","styled","Tooltip","tooltipClasses","useReactMediaRecorder","message","Row","Modal","home","RightLightTooltip","className","props","popper","theme","tooltip","backgroundColor","palette","common","white","color","boxShadow","shadows","fontSize","server_url","process","env","NODE_ENV","connections","peerConnectionConfig","socket","socketId","elms","Video","constructor","getPermissions","navigator","mediaDevices","getUserMedia","video","then","videoAvailable","catch","audio","audioAvailable","getDisplayMedia","setState","screenAvailable","stream","window","localStream","localVideoref","current","srcObject","e","console","log","getMedia","connectToSocketServer","state","getUserMediaSuccess","tracks","getTracks","forEach","track","stop","id","addStream","createOffer","description","setLocalDescription","emit","JSON","stringify","localDescription","onended","blackSilence","MediaStream","black","silence","getDislayMedia","screen","getDislayMediaSuccess","gotMessageFromServer","fromId","signal","parse","sdp","setRemoteDescription","RTCSessionDescription","type","createAnswer","ice","addIceCandidate","RTCIceCandidate","changeCssVideos","main","widthMain","offsetWidth","minWidth","minHeight","height","String","width","videos","querySelectorAll","a","length","style","setProperty","connect","secure","on","location","href","addMessage","document","querySelector","parentNode","removeChild","getElementById","clients","socketListId","RTCPeerConnection","onicecandidate","event","candidate","onaddstream","searchVidep","cssMesure","createElement","css","maxHeight","margin","borderStyle","borderColor","objectFit","i","setAttribute","autoplay","playsinline","appendChild","undefined","id2","ctx","AudioContext","oscillator","createOscillator","dst","createMediaStreamDestination","start","resume","Object","assign","getAudioTracks","enabled","canvas","getContext","fillRect","captureStream","getVideoTracks","handleVideo","handleAudio","handleScreen","handleEndCall","openChat","showModal","newmessages","closeChat","handleMessage","target","value","data","sender","socketIdSender","prevState","messages","handleUsername","username","sendMessage","copyUrl","text","clipboard","textArea","body","focus","select","execCommand","success","err","error","writeText","askForUsername","isChrome","userAgent","toLowerCase","vendor","matchChrome","test","match","createRef","internet","userName","render","background","padding","textAlign","marginTop","justifyContent","paddingTop","wordWrap","fontWeight","paddingRight","zIndex","overflow","overflowY","map","item","index","wordBreak"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,OAAOC,EAAP,MAAe,kBAAf;AACA,OAAOC,KAAP,MAAkB,OAAlB;AAEA,SAAQC,UAAR,EAAoBC,KAApB,EAA2BC,KAA3B,EAAkCC,MAAlC,QAA+C,mBAA/C;AACA,OAAOC,YAAP,MAAyB,6BAAzB;AACA,OAAOC,eAAP,MAA4B,gCAA5B;AACA,OAAOC,OAAP,MAAoB,wBAApB;AACA,OAAOC,UAAP,MAAuB,2BAAvB;AACA,OAAOC,eAAP,MAA4B,gCAA5B;AACA,OAAOC,mBAAP,MAAgC,oCAAhC;AACA,OAAOC,WAAP,MAAwB,4BAAxB;AACA,OAAOC,QAAP,MAAqB,yBAArB;AACA,SAASC,MAAT,QAAuB,sBAAvB;AACA,OAAOC,OAAP,IAAkBC,cAAlB,QAAwC,uBAAxC;AACA,SAASC,qBAAT,QAAsC,sBAAtC;AAEA,SAASC,OAAT,QAAwB,MAAxB;AACA,OAAO,oBAAP;AAEA,SAASC,GAAT,QAAoB,YAApB;AACA,OAAOC,KAAP,MAAkB,uBAAlB;AACA,OAAO,kCAAP;AACA,OAAO,aAAP;AACA,OAAOC,IAAP,MAAiB,mBAAjB;AAEA,MAAMC,iBAAiB,GAAGR,MAAM,CAAC;AAAA,MAAC;AAAES,IAAAA,SAAF;AAAa,OAAGC;AAAhB,GAAD;AAAA,sBAChC,oBAAC,OAAD,oBAAaA,KAAb;AAAoB,IAAA,OAAO,EAAE;AAAEC,MAAAA,MAAM,EAAEF;AAAV,KAA7B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KADgC;AAAA,CAAD,CAAN,CAErB;AAAA,MAAC;AAAEG,IAAAA;AAAF,GAAD;AAAA,SAAgB;AACpB,KAAE,MAAKV,cAAc,CAACW,OAAQ,EAA9B,GAAkC;AAChCC,MAAAA,eAAe,EAAEF,KAAK,CAACG,OAAN,CAAcC,MAAd,CAAqBC,KADN;AAEhCC,MAAAA,KAAK,EAAE,qBAFyB;AAGhCC,MAAAA,SAAS,EAAEP,KAAK,CAACQ,OAAN,CAAc,CAAd,CAHqB;AAIhCC,MAAAA,QAAQ,EAAE;AAJsB;AADd,GAAhB;AAAA,CAFqB,CAA1B;AAWA,MAAMC,UAAU,GAAGC,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,YAAzB,GAAwC,6BAAxC,GAAwE,uBAA3F;AAEA,IAAIC,WAAW,GAAG,EAAlB;AACA,MAAMC,oBAAoB,GAAG;AAC5B,gBAAc,CACb;AACA;AAAE,YAAQ;AAAV,GAFa;AADc,CAA7B;AAMA,IAAIC,MAAM,GAAG,IAAb;AACA,IAAIC,QAAQ,GAAG,IAAf;AACA,IAAIC,IAAI,GAAG,CAAX;;AAEA,MAAMC,KAAN,SAAoB9C,SAApB,CAA8B;AAC7B+C,EAAAA,WAAW,CAACtB,KAAD,EAAQ;AAAA;;AAClB,UAAMA,KAAN,CADkB;AAAA;;AAAA,SAyBnBuB,cAzBmB,GAyBF,YAAY;AAC5B,UAAG;AACF,cAAMC,SAAS,CAACC,YAAV,CAAuBC,YAAvB,CAAoC;AAAEC,UAAAA,KAAK,EAAE;AAAT,SAApC,EACJC,IADI,CACC,MAAM,KAAKC,cAAL,GAAsB,IAD7B,EAEJC,KAFI,CAEE,MAAM,KAAKD,cAAL,GAAsB,KAF9B,CAAN;AAIA,cAAML,SAAS,CAACC,YAAV,CAAuBC,YAAvB,CAAoC;AAAEK,UAAAA,KAAK,EAAE;AAAT,SAApC,EACJH,IADI,CACC,MAAM,KAAKI,cAAL,GAAsB,IAD7B,EAEJF,KAFI,CAEE,MAAM,KAAKE,cAAL,GAAsB,KAF9B,CAAN;;AAIA,YAAIR,SAAS,CAACC,YAAV,CAAuBQ,eAA3B,EAA4C;AAC3C,eAAKC,QAAL,CAAc;AAAEC,YAAAA,eAAe,EAAE;AAAnB,WAAd;AACA,SAFD,MAEO;AACN,eAAKD,QAAL,CAAc;AAAEC,YAAAA,eAAe,EAAE;AAAnB,WAAd;AACA;;AAED,YAAI,KAAKN,cAAL,IAAuB,KAAKG,cAAhC,EAAgD;AAC/CR,UAAAA,SAAS,CAACC,YAAV,CAAuBC,YAAvB,CAAoC;AAAEC,YAAAA,KAAK,EAAE,KAAKE,cAAd;AAA8BE,YAAAA,KAAK,EAAE,KAAKC;AAA1C,WAApC,EACEJ,IADF,CACQQ,MAAD,IAAY;AACjBC,YAAAA,MAAM,CAACC,WAAP,GAAqBF,MAArB;AACA,iBAAKG,aAAL,CAAmBC,OAAnB,CAA2BC,SAA3B,GAAuCL,MAAvC;AACA,WAJF,EAKER,IALF,CAKQQ,MAAD,IAAY,CAAE,CALrB,EAMEN,KANF,CAMSY,CAAD,IAAOC,OAAO,CAACC,GAAR,CAAYF,CAAZ,CANf;AAOA;AACD,OAxBD,CAwBE,OAAMA,CAAN,EAAS;AAAEC,QAAAA,OAAO,CAACC,GAAR,CAAYF,CAAZ;AAAgB;AAC7B,KAnDkB;;AAAA,SAqDnBG,QArDmB,GAqDR,MAAM;AAChB,WAAKX,QAAL,CAAc;AACbP,QAAAA,KAAK,EAAE,KAAKE,cADC;AAEbE,QAAAA,KAAK,EAAE,KAAKC;AAFC,OAAd,EAGG,MAAM;AACR,aAAKN,YAAL;AACA,aAAKoB,qBAAL;AACA,OAND;AAOA,KA7DkB;;AAAA,SA+DnBpB,YA/DmB,GA+DJ,MAAM;AACpB,UAAK,KAAKqB,KAAL,CAAWpB,KAAX,IAAoB,KAAKE,cAA1B,IAA8C,KAAKkB,KAAL,CAAWhB,KAAX,IAAoB,KAAKC,cAA3E,EAA4F;AAC3FR,QAAAA,SAAS,CAACC,YAAV,CAAuBC,YAAvB,CAAoC;AAAEC,UAAAA,KAAK,EAAE,KAAKoB,KAAL,CAAWpB,KAApB;AAA2BI,UAAAA,KAAK,EAAE,KAAKgB,KAAL,CAAWhB;AAA7C,SAApC,EACEH,IADF,CACO,KAAKoB,mBADZ,EAEEpB,IAFF,CAEQQ,MAAD,IAAY,CAAE,CAFrB,EAGEN,KAHF,CAGSY,CAAD,IAAOC,OAAO,CAACC,GAAR,CAAYF,CAAZ,CAHf;AAIA,OALD,MAKO;AACN,YAAI;AACH,cAAIO,MAAM,GAAG,KAAKV,aAAL,CAAmBC,OAAnB,CAA2BC,SAA3B,CAAqCS,SAArC,EAAb;AACAD,UAAAA,MAAM,CAACE,OAAP,CAAeC,KAAK,IAAIA,KAAK,CAACC,IAAN,EAAxB;AACA,SAHD,CAGE,OAAOX,CAAP,EAAU,CAAE;AACd;AACD,KA3EkB;;AAAA,SA6EnBM,mBA7EmB,GA6EIZ,MAAD,IAAY;AACjC,UAAI;AACHC,QAAAA,MAAM,CAACC,WAAP,CAAmBY,SAAnB,GAA+BC,OAA/B,CAAuCC,KAAK,IAAIA,KAAK,CAACC,IAAN,EAAhD;AACA,OAFD,CAEE,OAAMX,CAAN,EAAS;AAAEC,QAAAA,OAAO,CAACC,GAAR,CAAYF,CAAZ;AAAgB;;AAE7BL,MAAAA,MAAM,CAACC,WAAP,GAAqBF,MAArB;AACA,WAAKG,aAAL,CAAmBC,OAAnB,CAA2BC,SAA3B,GAAuCL,MAAvC;;AAEA,WAAK,IAAIkB,EAAT,IAAetC,WAAf,EAA4B;AAC3B,YAAIsC,EAAE,KAAKnC,QAAX,EAAqB;AAErBH,QAAAA,WAAW,CAACsC,EAAD,CAAX,CAAgBC,SAAhB,CAA0BlB,MAAM,CAACC,WAAjC;AAEAtB,QAAAA,WAAW,CAACsC,EAAD,CAAX,CAAgBE,WAAhB,GAA8B5B,IAA9B,CAAoC6B,WAAD,IAAiB;AACnDzC,UAAAA,WAAW,CAACsC,EAAD,CAAX,CAAgBI,mBAAhB,CAAoCD,WAApC,EACE7B,IADF,CACO,MAAM;AACXV,YAAAA,MAAM,CAACyC,IAAP,CAAY,QAAZ,EAAsBL,EAAtB,EAA0BM,IAAI,CAACC,SAAL,CAAe;AAAE,qBAAO7C,WAAW,CAACsC,EAAD,CAAX,CAAgBQ;AAAzB,aAAf,CAA1B;AACA,WAHF,EAIEhC,KAJF,CAIQY,CAAC,IAAIC,OAAO,CAACC,GAAR,CAAYF,CAAZ,CAJb;AAKA,SAND;AAOA;;AAEDN,MAAAA,MAAM,CAACc,SAAP,GAAmBC,OAAnB,CAA2BC,KAAK,IAAIA,KAAK,CAACW,OAAN,GAAgB,MAAM;AACzD,aAAK7B,QAAL,CAAc;AACbP,UAAAA,KAAK,EAAE,KADM;AAEbI,UAAAA,KAAK,EAAE;AAFM,SAAd,EAGG,MAAM;AACR,cAAI;AACH,gBAAIkB,MAAM,GAAG,KAAKV,aAAL,CAAmBC,OAAnB,CAA2BC,SAA3B,CAAqCS,SAArC,EAAb;AACAD,YAAAA,MAAM,CAACE,OAAP,CAAeC,KAAK,IAAIA,KAAK,CAACC,IAAN,EAAxB;AACA,WAHD,CAGE,OAAMX,CAAN,EAAS;AAAEC,YAAAA,OAAO,CAACC,GAAR,CAAYF,CAAZ;AAAgB;;AAE7B,cAAIsB,YAAY,GAAG;AAAA,mBAAa,IAAIC,WAAJ,CAAgB,CAAC,KAAI,CAACC,KAAL,CAAW,YAAX,CAAD,EAAsB,KAAI,CAACC,OAAL,EAAtB,CAAhB,CAAb;AAAA,WAAnB;;AACA9B,UAAAA,MAAM,CAACC,WAAP,GAAqB0B,YAAY,EAAjC;AACA,eAAKzB,aAAL,CAAmBC,OAAnB,CAA2BC,SAA3B,GAAuCJ,MAAM,CAACC,WAA9C;;AAEA,eAAK,IAAIgB,EAAT,IAAetC,WAAf,EAA4B;AAC3BA,YAAAA,WAAW,CAACsC,EAAD,CAAX,CAAgBC,SAAhB,CAA0BlB,MAAM,CAACC,WAAjC;AAEAtB,YAAAA,WAAW,CAACsC,EAAD,CAAX,CAAgBE,WAAhB,GAA8B5B,IAA9B,CAAoC6B,WAAD,IAAiB;AACnDzC,cAAAA,WAAW,CAACsC,EAAD,CAAX,CAAgBI,mBAAhB,CAAoCD,WAApC,EACE7B,IADF,CACO,MAAM;AACXV,gBAAAA,MAAM,CAACyC,IAAP,CAAY,QAAZ,EAAsBL,EAAtB,EAA0BM,IAAI,CAACC,SAAL,CAAe;AAAE,yBAAO7C,WAAW,CAACsC,EAAD,CAAX,CAAgBQ;AAAzB,iBAAf,CAA1B;AACA,eAHF,EAIEhC,KAJF,CAIQY,CAAC,IAAIC,OAAO,CAACC,GAAR,CAAYF,CAAZ,CAJb;AAKA,aAND;AAOA;AACD,SAxBD;AAyBA,OA1BD;AA2BA,KA9HkB;;AAAA,SAgInB0B,cAhImB,GAgIF,MAAM;AACtB,UAAI,KAAKrB,KAAL,CAAWsB,MAAf,EAAuB;AACtB,YAAI7C,SAAS,CAACC,YAAV,CAAuBQ,eAA3B,EAA4C;AAC3CT,UAAAA,SAAS,CAACC,YAAV,CAAuBQ,eAAvB,CAAuC;AAAEN,YAAAA,KAAK,EAAE,IAAT;AAAeI,YAAAA,KAAK,EAAE;AAAtB,WAAvC,EACEH,IADF,CACO,KAAK0C,qBADZ,EAEE1C,IAFF,CAEQQ,MAAD,IAAY,CAAE,CAFrB,EAGEN,KAHF,CAGSY,CAAD,IAAOC,OAAO,CAACC,GAAR,CAAYF,CAAZ,CAHf;AAIA;AACD;AACD,KAzIkB;;AAAA,SA2InB4B,qBA3ImB,GA2IMlC,MAAD,IAAY;AACnC,UAAI;AACHC,QAAAA,MAAM,CAACC,WAAP,CAAmBY,SAAnB,GAA+BC,OAA/B,CAAuCC,KAAK,IAAIA,KAAK,CAACC,IAAN,EAAhD;AACA,OAFD,CAEE,OAAMX,CAAN,EAAS;AAAEC,QAAAA,OAAO,CAACC,GAAR,CAAYF,CAAZ;AAAgB;;AAE7BL,MAAAA,MAAM,CAACC,WAAP,GAAqBF,MAArB;AACA,WAAKG,aAAL,CAAmBC,OAAnB,CAA2BC,SAA3B,GAAuCL,MAAvC;;AAEA,WAAK,IAAIkB,EAAT,IAAetC,WAAf,EAA4B;AAC3B,YAAIsC,EAAE,KAAKnC,QAAX,EAAqB;AAErBH,QAAAA,WAAW,CAACsC,EAAD,CAAX,CAAgBC,SAAhB,CAA0BlB,MAAM,CAACC,WAAjC;AAEAtB,QAAAA,WAAW,CAACsC,EAAD,CAAX,CAAgBE,WAAhB,GAA8B5B,IAA9B,CAAoC6B,WAAD,IAAiB;AACnDzC,UAAAA,WAAW,CAACsC,EAAD,CAAX,CAAgBI,mBAAhB,CAAoCD,WAApC,EACE7B,IADF,CACO,MAAM;AACXV,YAAAA,MAAM,CAACyC,IAAP,CAAY,QAAZ,EAAsBL,EAAtB,EAA0BM,IAAI,CAACC,SAAL,CAAe;AAAE,qBAAO7C,WAAW,CAACsC,EAAD,CAAX,CAAgBQ;AAAzB,aAAf,CAA1B;AACA,WAHF,EAIEhC,KAJF,CAIQY,CAAC,IAAIC,OAAO,CAACC,GAAR,CAAYF,CAAZ,CAJb;AAKA,SAND;AAOA;;AAEDN,MAAAA,MAAM,CAACc,SAAP,GAAmBC,OAAnB,CAA2BC,KAAK,IAAIA,KAAK,CAACW,OAAN,GAAgB,MAAM;AACzD,aAAK7B,QAAL,CAAc;AACbmC,UAAAA,MAAM,EAAE;AADK,SAAd,EAEG,MAAM;AACR,cAAI;AACH,gBAAIpB,MAAM,GAAG,KAAKV,aAAL,CAAmBC,OAAnB,CAA2BC,SAA3B,CAAqCS,SAArC,EAAb;AACAD,YAAAA,MAAM,CAACE,OAAP,CAAeC,KAAK,IAAIA,KAAK,CAACC,IAAN,EAAxB;AACA,WAHD,CAGE,OAAMX,CAAN,EAAS;AAAEC,YAAAA,OAAO,CAACC,GAAR,CAAYF,CAAZ;AAAgB;;AAE7B,cAAIsB,YAAY,GAAG;AAAA,mBAAa,IAAIC,WAAJ,CAAgB,CAAC,KAAI,CAACC,KAAL,CAAW,YAAX,CAAD,EAAsB,KAAI,CAACC,OAAL,EAAtB,CAAhB,CAAb;AAAA,WAAnB;;AACA9B,UAAAA,MAAM,CAACC,WAAP,GAAqB0B,YAAY,EAAjC;AACA,eAAKzB,aAAL,CAAmBC,OAAnB,CAA2BC,SAA3B,GAAuCJ,MAAM,CAACC,WAA9C;AAEA,eAAKZ,YAAL;AACA,SAbD;AAcA,OAfD;AAgBA,KAjLkB;;AAAA,SAmLnB6C,oBAnLmB,GAmLI,CAACC,MAAD,EAAS9E,OAAT,KAAqB;AAC3C,UAAI+E,MAAM,GAAGb,IAAI,CAACc,KAAL,CAAWhF,OAAX,CAAb;;AAEA,UAAI8E,MAAM,KAAKrD,QAAf,EAAyB;AACxB,YAAIsD,MAAM,CAACE,GAAX,EAAgB;AACf3D,UAAAA,WAAW,CAACwD,MAAD,CAAX,CAAoBI,oBAApB,CAAyC,IAAIC,qBAAJ,CAA0BJ,MAAM,CAACE,GAAjC,CAAzC,EAAgF/C,IAAhF,CAAqF,MAAM;AAC1F,gBAAI6C,MAAM,CAACE,GAAP,CAAWG,IAAX,KAAoB,OAAxB,EAAiC;AAChC9D,cAAAA,WAAW,CAACwD,MAAD,CAAX,CAAoBO,YAApB,GAAmCnD,IAAnC,CAAyC6B,WAAD,IAAiB;AACxDzC,gBAAAA,WAAW,CAACwD,MAAD,CAAX,CAAoBd,mBAApB,CAAwCD,WAAxC,EAAqD7B,IAArD,CAA0D,MAAM;AAC/DV,kBAAAA,MAAM,CAACyC,IAAP,CAAY,QAAZ,EAAsBa,MAAtB,EAA8BZ,IAAI,CAACC,SAAL,CAAe;AAAE,2BAAO7C,WAAW,CAACwD,MAAD,CAAX,CAAoBV;AAA7B,mBAAf,CAA9B;AACA,iBAFD,EAEGhC,KAFH,CAESY,CAAC,IAAIC,OAAO,CAACC,GAAR,CAAYF,CAAZ,CAFd;AAGA,eAJD,EAIGZ,KAJH,CAISY,CAAC,IAAIC,OAAO,CAACC,GAAR,CAAYF,CAAZ,CAJd;AAKA;AACD,WARD,EAQGZ,KARH,CAQSY,CAAC,IAAIC,OAAO,CAACC,GAAR,CAAYF,CAAZ,CARd;AASA;;AAED,YAAI+B,MAAM,CAACO,GAAX,EAAgB;AACfhE,UAAAA,WAAW,CAACwD,MAAD,CAAX,CAAoBS,eAApB,CAAoC,IAAIC,eAAJ,CAAoBT,MAAM,CAACO,GAA3B,CAApC,EAAqElD,KAArE,CAA2EY,CAAC,IAAIC,OAAO,CAACC,GAAR,CAAYF,CAAZ,CAAhF;AACA;AACD;AACD,KAvMkB;;AAAA,SAyMnByC,eAzMmB,GAyMAC,IAAD,IAAU;AAC3B,UAAIC,SAAS,GAAGD,IAAI,CAACE,WAArB;AACA,UAAIC,QAAQ,GAAG,KAAf;;AACA,UAAKF,SAAS,GAAG,EAAZ,GAAiB,GAAlB,GAAyB,GAA7B,EAAkC;AACjCE,QAAAA,QAAQ,GAAG,OAAX;AACA;;AACD,UAAIC,SAAS,GAAG,KAAhB;AAEA,UAAIC,MAAM,GAAGC,MAAM,CAAC,MAAMtE,IAAP,CAAN,GAAqB,GAAlC;AACA,UAAIuE,KAAK,GAAG,EAAZ;;AACA,UAAGvE,IAAI,KAAK,CAAT,IAAcA,IAAI,KAAK,CAA1B,EAA6B;AAC5BuE,QAAAA,KAAK,GAAG,MAAR;AACAF,QAAAA,MAAM,GAAG,MAAT;AACA,OAHD,MAGO,IAAIrE,IAAI,KAAK,CAAb,EAAgB;AACtBuE,QAAAA,KAAK,GAAG,KAAR;AACAF,QAAAA,MAAM,GAAG,MAAT;AACA,OAHM,MAGA,IAAIrE,IAAI,KAAK,CAAT,IAAcA,IAAI,KAAK,CAA3B,EAA8B;AACpCuE,QAAAA,KAAK,GAAG,KAAR;AACAF,QAAAA,MAAM,GAAG,KAAT;AACA,OAHM,MAGA;AACNE,QAAAA,KAAK,GAAGD,MAAM,CAAC,MAAMtE,IAAP,CAAN,GAAqB,GAA7B;AACA;;AAED,UAAIwE,MAAM,GAAGR,IAAI,CAACS,gBAAL,CAAsB,OAAtB,CAAb;;AACA,WAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGF,MAAM,CAACG,MAA3B,EAAmC,EAAED,CAArC,EAAwC;AACvCF,QAAAA,MAAM,CAACE,CAAD,CAAN,CAAUE,KAAV,CAAgBT,QAAhB,GAA2BA,QAA3B;AACAK,QAAAA,MAAM,CAACE,CAAD,CAAN,CAAUE,KAAV,CAAgBR,SAAhB,GAA4BA,SAA5B;AACAI,QAAAA,MAAM,CAACE,CAAD,CAAN,CAAUE,KAAV,CAAgBC,WAAhB,CAA4B,OAA5B,EAAqCN,KAArC;AACAC,QAAAA,MAAM,CAACE,CAAD,CAAN,CAAUE,KAAV,CAAgBC,WAAhB,CAA4B,QAA5B,EAAsCR,MAAtC;AACA;;AAED,aAAO;AAACF,QAAAA,QAAD;AAAWC,QAAAA,SAAX;AAAsBG,QAAAA,KAAtB;AAA6BF,QAAAA;AAA7B,OAAP;AACA,KAzOkB;;AAAA,SA2OnB3C,qBA3OmB,GA2OK,MAAM;AAC7B5B,MAAAA,MAAM,GAAG1C,EAAE,CAAC0H,OAAH,CAAWtF,UAAX,EAAuB;AAAEuF,QAAAA,MAAM,EAAE;AAAV,OAAvB,CAAT;AAEAjF,MAAAA,MAAM,CAACkF,EAAP,CAAU,QAAV,EAAoB,KAAK7B,oBAAzB;AAEArD,MAAAA,MAAM,CAACkF,EAAP,CAAU,SAAV,EAAqB,MAAM;AAC1BlF,QAAAA,MAAM,CAACyC,IAAP,CAAY,WAAZ,EAAyBtB,MAAM,CAACgE,QAAP,CAAgBC,IAAzC;AACAnF,QAAAA,QAAQ,GAAGD,MAAM,CAACoC,EAAlB;AAEApC,QAAAA,MAAM,CAACkF,EAAP,CAAU,cAAV,EAA0B,KAAKG,UAA/B;AAEArF,QAAAA,MAAM,CAACkF,EAAP,CAAU,WAAV,EAAwB9C,EAAD,IAAQ;AAC9B,cAAI3B,KAAK,GAAG6E,QAAQ,CAACC,aAAT,CAAwB,iBAAgBnD,EAAG,IAA3C,CAAZ;;AACA,cAAI3B,KAAK,KAAK,IAAd,EAAoB;AACnBP,YAAAA,IAAI;AACJO,YAAAA,KAAK,CAAC+E,UAAN,CAAiBC,WAAjB,CAA6BhF,KAA7B;AAEA,gBAAIyD,IAAI,GAAGoB,QAAQ,CAACI,cAAT,CAAwB,MAAxB,CAAX;AACA,iBAAKzB,eAAL,CAAqBC,IAArB;AACA;AACD,SATD;AAWAlE,QAAAA,MAAM,CAACkF,EAAP,CAAU,aAAV,EAAyB,CAAC9C,EAAD,EAAKuD,OAAL,KAAiB;AACzCA,UAAAA,OAAO,CAAC1D,OAAR,CAAiB2D,YAAD,IAAkB;AACjC9F,YAAAA,WAAW,CAAC8F,YAAD,CAAX,GAA4B,IAAIC,iBAAJ,CAAsB9F,oBAAtB,CAA5B,CADiC,CAEjC;;AACAD,YAAAA,WAAW,CAAC8F,YAAD,CAAX,CAA0BE,cAA1B,GAA2C,UAAUC,KAAV,EAAiB;AAC3D,kBAAIA,KAAK,CAACC,SAAN,IAAmB,IAAvB,EAA6B;AAC5BhG,gBAAAA,MAAM,CAACyC,IAAP,CAAY,QAAZ,EAAsBmD,YAAtB,EAAoClD,IAAI,CAACC,SAAL,CAAe;AAAE,yBAAOoD,KAAK,CAACC;AAAf,iBAAf,CAApC;AACA;AACD,aAJD,CAHiC,CASjC;;;AACAlG,YAAAA,WAAW,CAAC8F,YAAD,CAAX,CAA0BK,WAA1B,GAAyCF,KAAD,IAAW;AAClD;AACA,kBAAIG,WAAW,GAAGZ,QAAQ,CAACC,aAAT,CAAwB,iBAAgBK,YAAa,IAArD,CAAlB;;AACA,kBAAIM,WAAW,KAAK,IAApB,EAA0B;AAAE;AAC3BA,gBAAAA,WAAW,CAAC3E,SAAZ,GAAwBwE,KAAK,CAAC7E,MAA9B;AACA,eAFD,MAEO;AACNhB,gBAAAA,IAAI,GAAGyF,OAAO,CAACd,MAAf;AACA,oBAAIX,IAAI,GAAGoB,QAAQ,CAACI,cAAT,CAAwB,MAAxB,CAAX;AACA,oBAAIS,SAAS,GAAG,KAAKlC,eAAL,CAAqBC,IAArB,CAAhB;AAEA,oBAAIzD,KAAK,GAAG6E,QAAQ,CAACc,aAAT,CAAuB,OAAvB,CAAZ;AAEA,oBAAIC,GAAG,GAAG;AAAChC,kBAAAA,QAAQ,EAAE8B,SAAS,CAAC9B,QAArB;AAA+BC,kBAAAA,SAAS,EAAE6B,SAAS,CAAC7B,SAApD;AAA+DgC,kBAAAA,SAAS,EAAE,MAA1E;AAAkFC,kBAAAA,MAAM,EAAE,MAA1F;AACTC,kBAAAA,WAAW,EAAE,OADJ;AACaC,kBAAAA,WAAW,EAAE,SAD1B;AACqCC,kBAAAA,SAAS,EAAE;AADhD,iBAAV;;AAEA,qBAAI,IAAIC,CAAR,IAAaN,GAAb,EAAkB5F,KAAK,CAACqE,KAAN,CAAY6B,CAAZ,IAAiBN,GAAG,CAACM,CAAD,CAApB;;AAElBlG,gBAAAA,KAAK,CAACqE,KAAN,CAAYC,WAAZ,CAAwB,OAAxB,EAAiCoB,SAAS,CAAC1B,KAA3C;AACAhE,gBAAAA,KAAK,CAACqE,KAAN,CAAYC,WAAZ,CAAwB,QAAxB,EAAkCoB,SAAS,CAAC5B,MAA5C;AACA9D,gBAAAA,KAAK,CAACmG,YAAN,CAAmB,aAAnB,EAAkChB,YAAlC;AACAnF,gBAAAA,KAAK,CAACc,SAAN,GAAkBwE,KAAK,CAAC7E,MAAxB;AACAT,gBAAAA,KAAK,CAACoG,QAAN,GAAiB,IAAjB;AACApG,gBAAAA,KAAK,CAACqG,WAAN,GAAoB,IAApB;AAEA5C,gBAAAA,IAAI,CAAC6C,WAAL,CAAiBtG,KAAjB;AACA;AACD,aAzBD,CAViC,CAqCjC;;;AACA,gBAAIU,MAAM,CAACC,WAAP,KAAuB4F,SAAvB,IAAoC7F,MAAM,CAACC,WAAP,KAAuB,IAA/D,EAAqE;AACpEtB,cAAAA,WAAW,CAAC8F,YAAD,CAAX,CAA0BvD,SAA1B,CAAoClB,MAAM,CAACC,WAA3C;AACA,aAFD,MAEO;AACN,kBAAI0B,YAAY,GAAG;AAAA,uBAAa,IAAIC,WAAJ,CAAgB,CAAC,KAAI,CAACC,KAAL,CAAW,YAAX,CAAD,EAAsB,KAAI,CAACC,OAAL,EAAtB,CAAhB,CAAb;AAAA,eAAnB;;AACA9B,cAAAA,MAAM,CAACC,WAAP,GAAqB0B,YAAY,EAAjC;AACAhD,cAAAA,WAAW,CAAC8F,YAAD,CAAX,CAA0BvD,SAA1B,CAAoClB,MAAM,CAACC,WAA3C;AACA;AACD,WA7CD;;AA+CA,cAAIgB,EAAE,KAAKnC,QAAX,EAAqB;AACpB,iBAAK,IAAIgH,GAAT,IAAgBnH,WAAhB,EAA6B;AAC5B,kBAAImH,GAAG,KAAKhH,QAAZ,EAAsB;;AAEtB,kBAAI;AACHH,gBAAAA,WAAW,CAACmH,GAAD,CAAX,CAAiB5E,SAAjB,CAA2BlB,MAAM,CAACC,WAAlC;AACA,eAFD,CAEE,OAAMI,CAAN,EAAS,CAAE;;AAEb1B,cAAAA,WAAW,CAACmH,GAAD,CAAX,CAAiB3E,WAAjB,GAA+B5B,IAA/B,CAAqC6B,WAAD,IAAiB;AACpDzC,gBAAAA,WAAW,CAACmH,GAAD,CAAX,CAAiBzE,mBAAjB,CAAqCD,WAArC,EACE7B,IADF,CACO,MAAM;AACXV,kBAAAA,MAAM,CAACyC,IAAP,CAAY,QAAZ,EAAsBwE,GAAtB,EAA2BvE,IAAI,CAACC,SAAL,CAAe;AAAE,2BAAO7C,WAAW,CAACmH,GAAD,CAAX,CAAiBrE;AAA1B,mBAAf,CAA3B;AACA,iBAHF,EAIEhC,KAJF,CAIQY,CAAC,IAAIC,OAAO,CAACC,GAAR,CAAYF,CAAZ,CAJb;AAKA,eAND;AAOA;AACD;AACD,SAjED;AAkEA,OAnFD;AAoFA,KApUkB;;AAAA,SAsUnByB,OAtUmB,GAsUT,MAAM;AACf,UAAIiE,GAAG,GAAG,IAAIC,YAAJ,EAAV;AACA,UAAIC,UAAU,GAAGF,GAAG,CAACG,gBAAJ,EAAjB;AACA,UAAIC,GAAG,GAAGF,UAAU,CAACpC,OAAX,CAAmBkC,GAAG,CAACK,4BAAJ,EAAnB,CAAV;AACAH,MAAAA,UAAU,CAACI,KAAX;AACAN,MAAAA,GAAG,CAACO,MAAJ;AACA,aAAOC,MAAM,CAACC,MAAP,CAAcL,GAAG,CAACpG,MAAJ,CAAW0G,cAAX,GAA4B,CAA5B,CAAd,EAA8C;AAAEC,QAAAA,OAAO,EAAE;AAAX,OAA9C,CAAP;AACA,KA7UkB;;AAAA,SA8UnB7E,KA9UmB,GA8UX,YAAwC;AAAA,UAAvC;AAAEyB,QAAAA,KAAK,GAAG,GAAV;AAAeF,QAAAA,MAAM,GAAG;AAAxB,OAAuC,uEAAP,EAAO;AAC/C,UAAIuD,MAAM,GAAGJ,MAAM,CAACC,MAAP,CAAcrC,QAAQ,CAACc,aAAT,CAAuB,QAAvB,CAAd,EAAgD;AAAE3B,QAAAA,KAAF;AAASF,QAAAA;AAAT,OAAhD,CAAb;AACAuD,MAAAA,MAAM,CAACC,UAAP,CAAkB,IAAlB,EAAwBC,QAAxB,CAAiC,CAAjC,EAAoC,CAApC,EAAuCvD,KAAvC,EAA8CF,MAA9C;AACA,UAAIrD,MAAM,GAAG4G,MAAM,CAACG,aAAP,EAAb;AACA,aAAOP,MAAM,CAACC,MAAP,CAAczG,MAAM,CAACgH,cAAP,GAAwB,CAAxB,CAAd,EAA0C;AAAEL,QAAAA,OAAO,EAAE;AAAX,OAA1C,CAAP;AACA,KAnVkB;;AAAA,SAqVnBM,WArVmB,GAqVL,MAAM,KAAKnH,QAAL,CAAc;AAAEP,MAAAA,KAAK,EAAE,CAAC,KAAKoB,KAAL,CAAWpB;AAArB,KAAd,EAA4C,MAAM,KAAKD,YAAL,EAAlD,CArVD;;AAAA,SAsVnB4H,WAtVmB,GAsVL,MAAM,KAAKpH,QAAL,CAAc;AAAEH,MAAAA,KAAK,EAAE,CAAC,KAAKgB,KAAL,CAAWhB;AAArB,KAAd,EAA4C,MAAM,KAAKL,YAAL,EAAlD,CAtVD;;AAAA,SAuVnB6H,YAvVmB,GAuVJ,MAAM,KAAKrH,QAAL,CAAc;AAAEmC,MAAAA,MAAM,EAAE,CAAC,KAAKtB,KAAL,CAAWsB;AAAtB,KAAd,EAA8C,MAAM,KAAKD,cAAL,EAApD,CAvVF;;AAAA,SAyVnBoF,aAzVmB,GAyVH,MAAM;AACrB,UAAI;AACH,YAAIvG,MAAM,GAAG,KAAKV,aAAL,CAAmBC,OAAnB,CAA2BC,SAA3B,CAAqCS,SAArC,EAAb;AACAD,QAAAA,MAAM,CAACE,OAAP,CAAeC,KAAK,IAAIA,KAAK,CAACC,IAAN,EAAxB;AACA,OAHD,CAGE,OAAOX,CAAP,EAAU,CAAE;;AACdL,MAAAA,MAAM,CAACgE,QAAP,CAAgBC,IAAhB,GAAuB,GAAvB;AACA,KA/VkB;;AAAA,SAiWnBmD,QAjWmB,GAiWR,MAAM,KAAKvH,QAAL,CAAc;AAAEwH,MAAAA,SAAS,EAAE,IAAb;AAAmBC,MAAAA,WAAW,EAAE;AAAhC,KAAd,CAjWE;;AAAA,SAkWnBC,SAlWmB,GAkWP,MAAM,KAAK1H,QAAL,CAAc;AAAEwH,MAAAA,SAAS,EAAE;AAAb,KAAd,CAlWC;;AAAA,SAmWnBG,aAnWmB,GAmWFnH,CAAD,IAAO,KAAKR,QAAL,CAAc;AAAExC,MAAAA,OAAO,EAAEgD,CAAC,CAACoH,MAAF,CAASC;AAApB,KAAd,CAnWJ;;AAAA,SAqWnBxD,UArWmB,GAqWN,CAACyD,IAAD,EAAOC,MAAP,EAAeC,cAAf,KAAkC;AAC9C,WAAKhI,QAAL,CAAciI,SAAS,KAAK;AAC3BC,QAAAA,QAAQ,EAAE,CAAC,GAAGD,SAAS,CAACC,QAAd,EAAwB;AAAE,oBAAUH,MAAZ;AAAoB,kBAAQD;AAA5B,SAAxB;AADiB,OAAL,CAAvB;;AAGA,UAAIE,cAAc,KAAK/I,QAAvB,EAAiC;AAChC,aAAKe,QAAL,CAAc;AAAEyH,UAAAA,WAAW,EAAE,KAAK5G,KAAL,CAAW4G,WAAX,GAAyB;AAAxC,SAAd;AACA;AACD,KA5WkB;;AAAA,SA8WnBU,cA9WmB,GA8WD3H,CAAD,IAAO,KAAKR,QAAL,CAAc;AAAEoI,MAAAA,QAAQ,EAAE5H,CAAC,CAACoH,MAAF,CAASC;AAArB,KAAd,CA9WL;;AAAA,SAgXnBQ,WAhXmB,GAgXL,MAAM;AACnBrJ,MAAAA,MAAM,CAACyC,IAAP,CAAY,cAAZ,EAA4B,KAAKZ,KAAL,CAAWrD,OAAvC,EAAgD,KAAKqD,KAAL,CAAWuH,QAA3D;AACA,WAAKpI,QAAL,CAAc;AAAExC,QAAAA,OAAO,EAAE,EAAX;AAAeuK,QAAAA,MAAM,EAAE,KAAKlH,KAAL,CAAWuH;AAAlC,OAAd;AACA,KAnXkB;;AAAA,SAqXnBE,OArXmB,GAqXT,MAAM;AACf,UAAIC,IAAI,GAAGpI,MAAM,CAACgE,QAAP,CAAgBC,IAA3B;;AACA,UAAI,CAAC9E,SAAS,CAACkJ,SAAf,EAA0B;AACzB,YAAIC,QAAQ,GAAGnE,QAAQ,CAACc,aAAT,CAAuB,UAAvB,CAAf;AACAqD,QAAAA,QAAQ,CAACZ,KAAT,GAAiBU,IAAjB;AACAjE,QAAAA,QAAQ,CAACoE,IAAT,CAAc3C,WAAd,CAA0B0C,QAA1B;AACAA,QAAAA,QAAQ,CAACE,KAAT;AACAF,QAAAA,QAAQ,CAACG,MAAT;;AACA,YAAI;AACHtE,UAAAA,QAAQ,CAACuE,WAAT,CAAqB,MAArB;AACArL,UAAAA,OAAO,CAACsL,OAAR,CAAgB,2BAAhB;AACA,SAHD,CAGE,OAAOC,GAAP,EAAY;AACbvL,UAAAA,OAAO,CAACwL,KAAR,CAAc,gBAAd;AACA;;AACD1E,QAAAA,QAAQ,CAACoE,IAAT,CAAcjE,WAAd,CAA0BgE,QAA1B;AACA;AACA;;AACDnJ,MAAAA,SAAS,CAACkJ,SAAV,CAAoBS,SAApB,CAA8BV,IAA9B,EAAoC7I,IAApC,CAAyC,YAAY;AACpDlC,QAAAA,OAAO,CAACsL,OAAR,CAAgB,2BAAhB;AACA,OAFD,EAEG,MAAM;AACRtL,QAAAA,OAAO,CAACwL,KAAR,CAAc,gBAAd;AACA,OAJD;AAKA,KA3YkB;;AAAA,SA6YnBhF,OA7YmB,GA6YT,MAAM,KAAKhE,QAAL,CAAc;AAAEkJ,MAAAA,cAAc,EAAE;AAAlB,KAAd,EAAyC,MAAM,KAAKvI,QAAL,EAA/C,CA7YG;;AAAA,SA+YnBwI,QA/YmB,GA+YR,YAAY;AACtB,UAAIC,SAAS,GAAG,CAAC9J,SAAS,KAAKA,SAAS,CAAC8J,SAAV,IAAuB,EAA5B,CAAV,EAA2CC,WAA3C,EAAhB;AACA,UAAIC,MAAM,GAAG,CAAChK,SAAS,KAAKA,SAAS,CAACgK,MAAV,IAAoB,EAAzB,CAAV,EAAwCD,WAAxC,EAAb;AACA,UAAIE,WAAW,GAAG,aAAaC,IAAb,CAAkBF,MAAlB,IAA4BF,SAAS,CAACK,KAAV,CAAgB,yBAAhB,CAA5B,GAAyE,IAA3F,CAHsB,CAItB;AACA;;AACA,aAAOF,WAAW,KAAK,IAAvB;AACA,KAtZkB;;AAGlB,SAAKlJ,aAAL,GAAqBjE,KAAK,CAACsN,SAAN,EAArB;AAEA,SAAK/J,cAAL,GAAsB,KAAtB;AACA,SAAKG,cAAL,GAAsB,KAAtB;AAEA,SAAKe,KAAL,GAAa;AACZpB,MAAAA,KAAK,EAAE,KADK;AAEZI,MAAAA,KAAK,EAAE,KAFK;AAGZsC,MAAAA,MAAM,EAAE,KAHI;AAIZqF,MAAAA,SAAS,EAAE,KAJC;AAKZvH,MAAAA,eAAe,EAAE,KALL;AAMZiI,MAAAA,QAAQ,EAAE,EANE;AAOZ1K,MAAAA,OAAO,EAAE,EAPG;AAQZiK,MAAAA,WAAW,EAAE,CARD;AASZyB,MAAAA,cAAc,EAAE,IATJ;AAUZd,MAAAA,QAAQ,EAAE7L,KAAK,CAACoN,QAAN,CAAeC,QAAf;AAVE,KAAb;AAYA9K,IAAAA,WAAW,GAAG,EAAd;AAEA,SAAKO,cAAL;AACA;;AAiYDwK,EAAAA,MAAM,GAAG;AACR,QAAG,KAAKV,QAAL,OAAoB,KAAvB,EAA6B;AAC5B,0BACC;AAAK,QAAA,KAAK,EAAE;AAACW,UAAAA,UAAU,EAAE,OAAb;AAAsBrG,UAAAA,KAAK,EAAE,KAA7B;AAAoCF,UAAAA,MAAM,EAAE,MAA5C;AAAoDwG,UAAAA,OAAO,EAAE,MAA7D;AAAqE1G,UAAAA,QAAQ,EAAE,OAA/E;AACV2G,UAAAA,SAAS,EAAE,QADD;AACWzE,UAAAA,MAAM,EAAE,MADnB;AAC2B0E,UAAAA,SAAS,EAAE,MADtC;AAC8CC,UAAAA,cAAc,EAAE;AAD9D,SAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBAEC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qDAFD,CADD;AAMA;;AACD,wBACC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACC;AAAK,MAAA,SAAS,EAAC,WAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACC;AAAK,MAAA,GAAG,EAAEvM,IAAV;AAAgB,MAAA,GAAG,EAAC,MAApB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADD,CADD,CADD,eAMC;AAAK,MAAA,SAAS,EAAC,SAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACC;AAAK,MAAA,SAAS,EAAC,eAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACC,oBAAC,iBAAD;AAAmB,MAAA,KAAK,EAAC,UAAzB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACC;AAAK,MAAA,SAAS,EAAC,QAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAAwB;AAAG,MAAA,SAAS,EAAC,wBAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAAxB,CADD,CADD,eAIC,oBAAC,iBAAD;AAAmB,MAAA,KAAK,EAAC,YAAzB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACC;AAAK,MAAA,SAAS,EAAC,QAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAAwB;AAAG,MAAA,SAAS,EAAC,oBAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAAxB,CADD,CAJD,eAOC,oBAAC,iBAAD;AAAmB,MAAA,KAAK,EAAC,UAAzB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACC;AAAK,MAAA,SAAS,EAAC,QAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAAwB;AAAG,MAAA,SAAS,EAAC,WAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAAxB,CADD,CAPD,eAUC,oBAAC,iBAAD;AAAmB,MAAA,KAAK,EAAC,cAAzB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACC;AAAK,MAAA,SAAS,EAAC,QAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAAwB;AAAG,MAAA,SAAS,EAAC,kBAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAAxB,CADD,CAVD,eAaC;AAAK,MAAA,SAAS,EAAC,UAAf;AAA0B,MAAA,KAAK,EAAE;AAAEwM,QAAAA,UAAU,EAAE;AAAd,OAAjC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACC,oBAAC,KAAD;AAAO,MAAA,KAAK,EAAE;AAAC1L,QAAAA,QAAQ,EAAE,MAAX;AAAmB2L,QAAAA,QAAQ,EAAE;AAA7B,OAAd;AAAoD,MAAA,KAAK,EAAEjK,MAAM,CAACgE,QAAP,CAAgBC,IAA3E;AAAiF,MAAA,OAAO,EAAC,MAAzF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADD,eAEC;AAAQ,MAAA,SAAS,EAAC,SAAlB;AAA4B,MAAA,OAAO,EAAE,KAAKkE,OAA1C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0BAFD,CAbD,CADD,CAND,EA2BE,KAAKzH,KAAL,CAAWqI,cAAX,KAA8B,IAA9B,gBACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACC;AAAK,MAAA,KAAK,EAAE;AAACY,QAAAA,UAAU,EAAE,OAAb;AAAsBrG,QAAAA,KAAK,EAAE,KAA7B;AAAoCF,QAAAA,MAAM,EAAE,MAA5C;AAAoDwG,QAAAA,OAAO,EAAE,MAA7D;AAAqE1G,QAAAA,QAAQ,EAAE,OAA/E;AACV2G,QAAAA,SAAS,EAAE,QADD;AACWzE,QAAAA,MAAM,EAAE,MADnB;AAC2B0E,QAAAA,SAAS,EAAE,MADtC;AAC8CC,QAAAA,cAAc,EAAE;AAD9D,OAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAEC;AAAG,MAAA,KAAK,EAAE;AAAE3E,QAAAA,MAAM,EAAE,CAAV;AAAa8E,QAAAA,UAAU,EAAE,MAAzB;AAAiCC,QAAAA,YAAY,EAAE;AAA/C,OAAV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,2BAFD,eAGC,oBAAC,KAAD;AAAO,MAAA,WAAW,EAAC,UAAnB;AAA8B,MAAA,KAAK,EAAE,KAAKzJ,KAAL,CAAWuH,QAAhD;AAA0D,MAAA,QAAQ,EAAE5H,CAAC,IAAI,KAAK2H,cAAL,CAAoB3H,CAApB,CAAzE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAHD,eAIC;AAAQ,MAAA,SAAS,EAAC,SAAlB;AAA4B,MAAA,OAAO,EAAE,KAAKwD,OAA1C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBAJD,CADD,eAQC;AAAK,MAAA,KAAK,EAAE;AAAEkG,QAAAA,cAAc,EAAE,QAAlB;AAA4BF,QAAAA,SAAS,EAAE,QAAvC;AAAiDG,QAAAA,UAAU,EAAE;AAA7D,OAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACC;AAAO,MAAA,EAAE,EAAC,UAAV;AAAqB,MAAA,GAAG,EAAE,KAAK9J,aAA/B;AAA8C,MAAA,QAAQ,MAAtD;AAAuD,MAAA,KAAK,MAA5D;AAA6D,MAAA,KAAK,EAAE;AACnEmF,QAAAA,WAAW,EAAE,OADsD;AAC9CC,QAAAA,WAAW,EAAE,SADiC;AACvBC,QAAAA,SAAS,EAAE,MADY;AACLjC,QAAAA,KAAK,EAAE,KADF;AACQF,QAAAA,MAAM,EAAE;AADhB,OAApE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADD,CARD,CADA,gBAeA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACC;AAAK,MAAA,SAAS,EAAC,UAAf;AAA0B,MAAA,KAAK,EAAE;AAAErF,QAAAA,eAAe,EAAE,YAAnB;AAAiCI,QAAAA,KAAK,EAAE,YAAxC;AAAsD0L,QAAAA,SAAS,EAAE;AAAjE,OAAjC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACC,oBAAC,UAAD;AAAY,MAAA,KAAK,EAAE;AAAE1L,QAAAA,KAAK,EAAE;AAAT,OAAnB;AAAyC,MAAA,OAAO,EAAE,KAAK6I,WAAvD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACG,KAAKtG,KAAL,CAAWpB,KAAX,KAAqB,IAAtB,gBAA8B,oBAAC,YAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAA9B,gBAAiD,oBAAC,eAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADnD,CADD,eAKC,oBAAC,UAAD;AAAY,MAAA,KAAK,EAAE;AAAEnB,QAAAA,KAAK,EAAE;AAAT,OAAnB;AAAyC,MAAA,OAAO,EAAE,KAAKgJ,aAAvD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACC,oBAAC,WAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADD,CALD,eASC,oBAAC,UAAD;AAAY,MAAA,KAAK,EAAE;AAAEhJ,QAAAA,KAAK,EAAE;AAAT,OAAnB;AAAyC,MAAA,OAAO,EAAE,KAAK8I,WAAvD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE,KAAKvG,KAAL,CAAWhB,KAAX,KAAqB,IAArB,gBAA4B,oBAAC,OAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAA5B,gBAA0C,oBAAC,UAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAD5C,CATD,EAaE,KAAKgB,KAAL,CAAWZ,eAAX,KAA+B,IAA/B,gBACA,oBAAC,UAAD;AAAY,MAAA,KAAK,EAAE;AAAE3B,QAAAA,KAAK,EAAE;AAAT,OAAnB;AAAyC,MAAA,OAAO,EAAE,KAAK+I,YAAvD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE,KAAKxG,KAAL,CAAWsB,MAAX,KAAsB,IAAtB,gBAA6B,oBAAC,eAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAA7B,gBAAmD,oBAAC,mBAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADrD,CADA,GAIE,IAjBJ,eAmBC,oBAAC,KAAD;AAAO,MAAA,YAAY,EAAE,KAAKtB,KAAL,CAAW4G,WAAhC;AAA6C,MAAA,GAAG,EAAE,GAAlD;AAAuD,MAAA,KAAK,EAAC,WAA7D;AAAyE,MAAA,OAAO,EAAE,KAAKF,QAAvF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACC,oBAAC,UAAD;AAAY,MAAA,KAAK,EAAE;AAAEjJ,QAAAA,KAAK,EAAE;AAAT,OAAnB;AAAyC,MAAA,OAAO,EAAE,KAAKiJ,QAAvD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACC,oBAAC,QAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADD,CADD,CAnBD,CADD,eA2BC,oBAAC,KAAD;AAAO,MAAA,IAAI,EAAE,KAAK1G,KAAL,CAAW2G,SAAxB;AAAmC,MAAA,MAAM,EAAE,KAAKE,SAAhD;AAA2D,MAAA,KAAK,EAAE;AAAE6C,QAAAA,MAAM,EAAE;AAAV,OAAlE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACC,oBAAC,KAAD,CAAO,MAAP;AAAc,MAAA,WAAW,MAAzB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACC,oBAAC,KAAD,CAAO,KAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBADD,CADD,eAIC,oBAAC,KAAD,CAAO,IAAP;AAAY,MAAA,KAAK,EAAE;AAAEC,QAAAA,QAAQ,EAAE,MAAZ;AAAoBC,QAAAA,SAAS,EAAE,MAA/B;AAAuClH,QAAAA,MAAM,EAAE,OAA/C;AAAwDyG,QAAAA,SAAS,EAAE;AAAnE,OAAnB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE,KAAKnJ,KAAL,CAAWqH,QAAX,CAAoBrE,MAApB,GAA6B,CAA7B,GAAiC,KAAKhD,KAAL,CAAWqH,QAAX,CAAoBwC,GAApB,CAAwB,CAACC,IAAD,EAAOC,KAAP,kBACzD;AAAK,MAAA,GAAG,EAAEA,KAAV;AAAiB,MAAA,KAAK,EAAE;AAACZ,QAAAA,SAAS,EAAE;AAAZ,OAAxB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACC;AAAG,MAAA,KAAK,EAAE;AAAEa,QAAAA,SAAS,EAAE;AAAb,OAAV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAAsC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAIF,IAAI,CAAC5C,MAAT,CAAtC,QAA6D4C,IAAI,CAAC7C,IAAlE,CADD,CADiC,CAAjC,gBAII;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBALN,CAJD,eAWC,oBAAC,KAAD,CAAO,MAAP;AAAc,MAAA,SAAS,EAAC,cAAxB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACC,oBAAC,KAAD;AAAO,MAAA,WAAW,EAAC,SAAnB;AAA6B,MAAA,KAAK,EAAE,KAAKjH,KAAL,CAAWrD,OAA/C;AAAwD,MAAA,QAAQ,EAAEgD,CAAC,IAAI,KAAKmH,aAAL,CAAmBnH,CAAnB,CAAvE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADD,eAEC,oBAAC,MAAD;AAAQ,MAAA,OAAO,EAAC,WAAhB;AAA4B,MAAA,KAAK,EAAC,SAAlC;AAA4C,MAAA,OAAO,EAAE,KAAK6H,WAA1D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cAFD,CAXD,CA3BD,eA4CC;AAAK,MAAA,SAAS,EAAC,WAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAGC,oBAAC,GAAD;AAAK,MAAA,EAAE,EAAC,MAAR;AAAe,MAAA,SAAS,EAAC,gBAAzB;AAA0C,MAAA,KAAK,EAAE;AAAE9C,QAAAA,MAAM,EAAE,CAAV;AAAawE,QAAAA,OAAO,EAAE;AAAtB,OAAjD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACC;AAAO,MAAA,EAAE,EAAC,UAAV;AAAqB,MAAA,GAAG,EAAE,KAAK1J,aAA/B;AAA8C,MAAA,QAAQ,MAAtD;AAAuD,MAAA,KAAK,MAA5D;AAA6D,MAAA,KAAK,EAAE;AACnEmF,QAAAA,WAAW,EAAE,OADsD;AAC9CC,QAAAA,WAAW,EAAE,SADiC;AACvBF,QAAAA,MAAM,EAAE,MADe;AACRG,QAAAA,SAAS,EAAE,MADH;AAEnEjC,QAAAA,KAAK,EAAE,KAF4D;AAEtDF,QAAAA,MAAM,EAAE;AAF8C,OAApE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADD,CAHD,CA5CD,CA1CF,CADD;AAoGA;;AAtgB4B;;AAygB9B,eAAepE,KAAf","sourcesContent":["import React, { Component } from 'react'\r\nimport io from 'socket.io-client'\r\nimport faker from \"faker\"\r\n\r\nimport {IconButton, Badge, Input, Button} from '@material-ui/core'\r\nimport VideocamIcon from '@material-ui/icons/Videocam'\r\nimport VideocamOffIcon from '@material-ui/icons/VideocamOff'\r\nimport MicIcon from '@material-ui/icons/Mic'\r\nimport MicOffIcon from '@material-ui/icons/MicOff'\r\nimport ScreenShareIcon from '@material-ui/icons/ScreenShare'\r\nimport StopScreenShareIcon from '@material-ui/icons/StopScreenShare'\r\nimport CallEndIcon from '@material-ui/icons/CallEnd'\r\nimport ChatIcon from '@material-ui/icons/Chat'\r\nimport { styled } from '@mui/material/styles';\r\nimport Tooltip, { tooltipClasses } from '@mui/material/Tooltip';\r\nimport { useReactMediaRecorder } from \"react-media-recorder\";\r\n\r\nimport { message } from 'antd'\r\nimport 'antd/dist/antd.css'\r\n\r\nimport { Row } from 'reactstrap'\r\nimport Modal from 'react-bootstrap/Modal'\r\nimport 'bootstrap/dist/css/bootstrap.css'\r\nimport \"./Video.css\"\r\nimport home from './images/logo.png';\r\n\r\nconst RightLightTooltip = styled(({ className, ...props }) => (\r\n\t<Tooltip {...props} classes={{ popper: className }} />\r\n  ))(({ theme }) => ({\r\n\t[`& .${tooltipClasses.tooltip}`]: {\r\n\t  backgroundColor: theme.palette.common.white,\r\n\t  color: 'rgba(0, 0, 0, 0.87)',\r\n\t  boxShadow: theme.shadows[1],\r\n\t  fontSize: 11,\r\n\t},\r\n  }));\r\n  \r\nconst server_url = process.env.NODE_ENV === 'production' ? 'https://video.tejas_sdp.com' : \"http://localhost:4001\"\r\n\r\nvar connections = {}\r\nconst peerConnectionConfig = {\r\n\t'iceServers': [\r\n\t\t// { 'urls': 'stun:stun.services.mozilla.com' },\r\n\t\t{ 'urls': 'stun:stun.l.google.com:19302' },\r\n\t]\r\n}\r\nvar socket = null\r\nvar socketId = null\r\nvar elms = 0\r\n\r\nclass Video extends Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props)\r\n\r\n\t\tthis.localVideoref = React.createRef()\r\n\r\n\t\tthis.videoAvailable = false\r\n\t\tthis.audioAvailable = false\r\n\r\n\t\tthis.state = {\r\n\t\t\tvideo: false,\r\n\t\t\taudio: false,\r\n\t\t\tscreen: false,\r\n\t\t\tshowModal: false,\r\n\t\t\tscreenAvailable: false,\r\n\t\t\tmessages: [],\r\n\t\t\tmessage: \"\",\r\n\t\t\tnewmessages: 0,\r\n\t\t\taskForUsername: true,\r\n\t\t\tusername: faker.internet.userName(),\r\n\t\t}\r\n\t\tconnections = {}\r\n\r\n\t\tthis.getPermissions()\r\n\t}\r\n\r\n\tgetPermissions = async () => {\r\n\t\ttry{\r\n\t\t\tawait navigator.mediaDevices.getUserMedia({ video: true })\r\n\t\t\t\t.then(() => this.videoAvailable = true)\r\n\t\t\t\t.catch(() => this.videoAvailable = false)\r\n\r\n\t\t\tawait navigator.mediaDevices.getUserMedia({ audio: true })\r\n\t\t\t\t.then(() => this.audioAvailable = true)\r\n\t\t\t\t.catch(() => this.audioAvailable = false)\r\n\r\n\t\t\tif (navigator.mediaDevices.getDisplayMedia) {\r\n\t\t\t\tthis.setState({ screenAvailable: true })\r\n\t\t\t} else {\r\n\t\t\t\tthis.setState({ screenAvailable: false })\r\n\t\t\t}\r\n\r\n\t\t\tif (this.videoAvailable || this.audioAvailable) {\r\n\t\t\t\tnavigator.mediaDevices.getUserMedia({ video: this.videoAvailable, audio: this.audioAvailable })\r\n\t\t\t\t\t.then((stream) => {\r\n\t\t\t\t\t\twindow.localStream = stream\r\n\t\t\t\t\t\tthis.localVideoref.current.srcObject = stream\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.then((stream) => {})\r\n\t\t\t\t\t.catch((e) => console.log(e))\r\n\t\t\t}\r\n\t\t} catch(e) { console.log(e) }\r\n\t}\r\n\r\n\tgetMedia = () => {\r\n\t\tthis.setState({\r\n\t\t\tvideo: this.videoAvailable,\r\n\t\t\taudio: this.audioAvailable\r\n\t\t}, () => {\r\n\t\t\tthis.getUserMedia()\r\n\t\t\tthis.connectToSocketServer()\r\n\t\t})\r\n\t}\r\n\r\n\tgetUserMedia = () => {\r\n\t\tif ((this.state.video && this.videoAvailable) || (this.state.audio && this.audioAvailable)) {\r\n\t\t\tnavigator.mediaDevices.getUserMedia({ video: this.state.video, audio: this.state.audio })\r\n\t\t\t\t.then(this.getUserMediaSuccess)\r\n\t\t\t\t.then((stream) => {})\r\n\t\t\t\t.catch((e) => console.log(e))\r\n\t\t} else {\r\n\t\t\ttry {\r\n\t\t\t\tlet tracks = this.localVideoref.current.srcObject.getTracks()\r\n\t\t\t\ttracks.forEach(track => track.stop())\r\n\t\t\t} catch (e) {}\r\n\t\t}\r\n\t}\r\n\r\n\tgetUserMediaSuccess = (stream) => {\r\n\t\ttry {\r\n\t\t\twindow.localStream.getTracks().forEach(track => track.stop())\r\n\t\t} catch(e) { console.log(e) }\r\n\r\n\t\twindow.localStream = stream\r\n\t\tthis.localVideoref.current.srcObject = stream\r\n\r\n\t\tfor (let id in connections) {\r\n\t\t\tif (id === socketId) continue\r\n\r\n\t\t\tconnections[id].addStream(window.localStream)\r\n\r\n\t\t\tconnections[id].createOffer().then((description) => {\r\n\t\t\t\tconnections[id].setLocalDescription(description)\r\n\t\t\t\t\t.then(() => {\r\n\t\t\t\t\t\tsocket.emit('signal', id, JSON.stringify({ 'sdp': connections[id].localDescription }))\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.catch(e => console.log(e))\r\n\t\t\t})\r\n\t\t}\r\n\r\n\t\tstream.getTracks().forEach(track => track.onended = () => {\r\n\t\t\tthis.setState({\r\n\t\t\t\tvideo: false,\r\n\t\t\t\taudio: false,\r\n\t\t\t}, () => {\r\n\t\t\t\ttry {\r\n\t\t\t\t\tlet tracks = this.localVideoref.current.srcObject.getTracks()\r\n\t\t\t\t\ttracks.forEach(track => track.stop())\r\n\t\t\t\t} catch(e) { console.log(e) }\r\n\r\n\t\t\t\tlet blackSilence = (...args) => new MediaStream([this.black(...args), this.silence()])\r\n\t\t\t\twindow.localStream = blackSilence()\r\n\t\t\t\tthis.localVideoref.current.srcObject = window.localStream\r\n\r\n\t\t\t\tfor (let id in connections) {\r\n\t\t\t\t\tconnections[id].addStream(window.localStream)\r\n\r\n\t\t\t\t\tconnections[id].createOffer().then((description) => {\r\n\t\t\t\t\t\tconnections[id].setLocalDescription(description)\r\n\t\t\t\t\t\t\t.then(() => {\r\n\t\t\t\t\t\t\t\tsocket.emit('signal', id, JSON.stringify({ 'sdp': connections[id].localDescription }))\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t.catch(e => console.log(e))\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t})\r\n\t}\r\n\r\n\tgetDislayMedia = () => {\r\n\t\tif (this.state.screen) {\r\n\t\t\tif (navigator.mediaDevices.getDisplayMedia) {\r\n\t\t\t\tnavigator.mediaDevices.getDisplayMedia({ video: true, audio: true })\r\n\t\t\t\t\t.then(this.getDislayMediaSuccess)\r\n\t\t\t\t\t.then((stream) => {})\r\n\t\t\t\t\t.catch((e) => console.log(e))\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tgetDislayMediaSuccess = (stream) => {\r\n\t\ttry {\r\n\t\t\twindow.localStream.getTracks().forEach(track => track.stop())\r\n\t\t} catch(e) { console.log(e) }\r\n\r\n\t\twindow.localStream = stream\r\n\t\tthis.localVideoref.current.srcObject = stream\r\n\r\n\t\tfor (let id in connections) {\r\n\t\t\tif (id === socketId) continue\r\n\r\n\t\t\tconnections[id].addStream(window.localStream)\r\n\r\n\t\t\tconnections[id].createOffer().then((description) => {\r\n\t\t\t\tconnections[id].setLocalDescription(description)\r\n\t\t\t\t\t.then(() => {\r\n\t\t\t\t\t\tsocket.emit('signal', id, JSON.stringify({ 'sdp': connections[id].localDescription }))\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.catch(e => console.log(e))\r\n\t\t\t})\r\n\t\t}\r\n\r\n\t\tstream.getTracks().forEach(track => track.onended = () => {\r\n\t\t\tthis.setState({\r\n\t\t\t\tscreen: false,\r\n\t\t\t}, () => {\r\n\t\t\t\ttry {\r\n\t\t\t\t\tlet tracks = this.localVideoref.current.srcObject.getTracks()\r\n\t\t\t\t\ttracks.forEach(track => track.stop())\r\n\t\t\t\t} catch(e) { console.log(e) }\r\n\r\n\t\t\t\tlet blackSilence = (...args) => new MediaStream([this.black(...args), this.silence()])\r\n\t\t\t\twindow.localStream = blackSilence()\r\n\t\t\t\tthis.localVideoref.current.srcObject = window.localStream\r\n\r\n\t\t\t\tthis.getUserMedia()\r\n\t\t\t})\r\n\t\t})\r\n\t}\r\n\r\n\tgotMessageFromServer = (fromId, message) => {\r\n\t\tvar signal = JSON.parse(message)\r\n\r\n\t\tif (fromId !== socketId) {\r\n\t\t\tif (signal.sdp) {\r\n\t\t\t\tconnections[fromId].setRemoteDescription(new RTCSessionDescription(signal.sdp)).then(() => {\r\n\t\t\t\t\tif (signal.sdp.type === 'offer') {\r\n\t\t\t\t\t\tconnections[fromId].createAnswer().then((description) => {\r\n\t\t\t\t\t\t\tconnections[fromId].setLocalDescription(description).then(() => {\r\n\t\t\t\t\t\t\t\tsocket.emit('signal', fromId, JSON.stringify({ 'sdp': connections[fromId].localDescription }))\r\n\t\t\t\t\t\t\t}).catch(e => console.log(e))\r\n\t\t\t\t\t\t}).catch(e => console.log(e))\r\n\t\t\t\t\t}\r\n\t\t\t\t}).catch(e => console.log(e))\r\n\t\t\t}\r\n\r\n\t\t\tif (signal.ice) {\r\n\t\t\t\tconnections[fromId].addIceCandidate(new RTCIceCandidate(signal.ice)).catch(e => console.log(e))\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tchangeCssVideos = (main) => {\r\n\t\tlet widthMain = main.offsetWidth\r\n\t\tlet minWidth = \"30%\"\r\n\t\tif ((widthMain * 30 / 100) < 300) {\r\n\t\t\tminWidth = \"300px\"\r\n\t\t}\r\n\t\tlet minHeight = \"40%\"\r\n\r\n\t\tlet height = String(100 / elms) + \"%\"\r\n\t\tlet width = \"\"\r\n\t\tif(elms === 0 || elms === 1) {\r\n\t\t\twidth = \"100%\"\r\n\t\t\theight = \"100%\"\r\n\t\t} else if (elms === 2) {\r\n\t\t\twidth = \"45%\"\r\n\t\t\theight = \"100%\"\r\n\t\t} else if (elms === 3 || elms === 4) {\r\n\t\t\twidth = \"35%\"\r\n\t\t\theight = \"50%\"\r\n\t\t} else {\r\n\t\t\twidth = String(100 / elms) + \"%\"\r\n\t\t}\r\n\r\n\t\tlet videos = main.querySelectorAll(\"video\")\r\n\t\tfor (let a = 0; a < videos.length; ++a) {\r\n\t\t\tvideos[a].style.minWidth = minWidth\r\n\t\t\tvideos[a].style.minHeight = minHeight\r\n\t\t\tvideos[a].style.setProperty(\"width\", width)\r\n\t\t\tvideos[a].style.setProperty(\"height\", height)\r\n\t\t}\r\n\r\n\t\treturn {minWidth, minHeight, width, height}\r\n\t}\r\n\r\n\tconnectToSocketServer = () => {\r\n\t\tsocket = io.connect(server_url, { secure: true })\r\n\r\n\t\tsocket.on('signal', this.gotMessageFromServer)\r\n\r\n\t\tsocket.on('connect', () => {\r\n\t\t\tsocket.emit('join-call', window.location.href)\r\n\t\t\tsocketId = socket.id\r\n\r\n\t\t\tsocket.on('chat-message', this.addMessage)\r\n\r\n\t\t\tsocket.on('user-left', (id) => {\r\n\t\t\t\tlet video = document.querySelector(`[data-socket=\"${id}\"]`)\r\n\t\t\t\tif (video !== null) {\r\n\t\t\t\t\telms--\r\n\t\t\t\t\tvideo.parentNode.removeChild(video)\r\n\r\n\t\t\t\t\tlet main = document.getElementById('main')\r\n\t\t\t\t\tthis.changeCssVideos(main)\r\n\t\t\t\t}\r\n\t\t\t})\r\n\r\n\t\t\tsocket.on('user-joined', (id, clients) => {\r\n\t\t\t\tclients.forEach((socketListId) => {\r\n\t\t\t\t\tconnections[socketListId] = new RTCPeerConnection(peerConnectionConfig)\r\n\t\t\t\t\t// Wait for their ice candidate       \r\n\t\t\t\t\tconnections[socketListId].onicecandidate = function (event) {\r\n\t\t\t\t\t\tif (event.candidate != null) {\r\n\t\t\t\t\t\t\tsocket.emit('signal', socketListId, JSON.stringify({ 'ice': event.candidate }))\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// Wait for their video stream\r\n\t\t\t\t\tconnections[socketListId].onaddstream = (event) => {\r\n\t\t\t\t\t\t// TODO mute button, full screen button\r\n\t\t\t\t\t\tvar searchVidep = document.querySelector(`[data-socket=\"${socketListId}\"]`)\r\n\t\t\t\t\t\tif (searchVidep !== null) { // if i don't do this check it make an empyt square\r\n\t\t\t\t\t\t\tsearchVidep.srcObject = event.stream\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\telms = clients.length\r\n\t\t\t\t\t\t\tlet main = document.getElementById('main')\r\n\t\t\t\t\t\t\tlet cssMesure = this.changeCssVideos(main)\r\n\r\n\t\t\t\t\t\t\tlet video = document.createElement('video')\r\n\r\n\t\t\t\t\t\t\tlet css = {minWidth: cssMesure.minWidth, minHeight: cssMesure.minHeight, maxHeight: \"100%\", margin: \"10px\",\r\n\t\t\t\t\t\t\t\tborderStyle: \"solid\", borderColor: \"#bdbdbd\", objectFit: \"fill\"}\r\n\t\t\t\t\t\t\tfor(let i in css) video.style[i] = css[i]\r\n\r\n\t\t\t\t\t\t\tvideo.style.setProperty(\"width\", cssMesure.width)\r\n\t\t\t\t\t\t\tvideo.style.setProperty(\"height\", cssMesure.height)\r\n\t\t\t\t\t\t\tvideo.setAttribute('data-socket', socketListId)\r\n\t\t\t\t\t\t\tvideo.srcObject = event.stream\r\n\t\t\t\t\t\t\tvideo.autoplay = true\r\n\t\t\t\t\t\t\tvideo.playsinline = true\r\n\r\n\t\t\t\t\t\t\tmain.appendChild(video)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// Add the local video stream\r\n\t\t\t\t\tif (window.localStream !== undefined && window.localStream !== null) {\r\n\t\t\t\t\t\tconnections[socketListId].addStream(window.localStream)\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tlet blackSilence = (...args) => new MediaStream([this.black(...args), this.silence()])\r\n\t\t\t\t\t\twindow.localStream = blackSilence()\r\n\t\t\t\t\t\tconnections[socketListId].addStream(window.localStream)\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\r\n\t\t\t\tif (id === socketId) {\r\n\t\t\t\t\tfor (let id2 in connections) {\r\n\t\t\t\t\t\tif (id2 === socketId) continue\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\ttry {\r\n\t\t\t\t\t\t\tconnections[id2].addStream(window.localStream)\r\n\t\t\t\t\t\t} catch(e) {}\r\n\t\t\t\r\n\t\t\t\t\t\tconnections[id2].createOffer().then((description) => {\r\n\t\t\t\t\t\t\tconnections[id2].setLocalDescription(description)\r\n\t\t\t\t\t\t\t\t.then(() => {\r\n\t\t\t\t\t\t\t\t\tsocket.emit('signal', id2, JSON.stringify({ 'sdp': connections[id2].localDescription }))\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t.catch(e => console.log(e))\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t})\r\n\t}\r\n\r\n\tsilence = () => {\r\n\t\tlet ctx = new AudioContext()\r\n\t\tlet oscillator = ctx.createOscillator()\r\n\t\tlet dst = oscillator.connect(ctx.createMediaStreamDestination())\r\n\t\toscillator.start()\r\n\t\tctx.resume()\r\n\t\treturn Object.assign(dst.stream.getAudioTracks()[0], { enabled: false })\r\n\t}\r\n\tblack = ({ width = 640, height = 480 } = {}) => {\r\n\t\tlet canvas = Object.assign(document.createElement(\"canvas\"), { width, height })\r\n\t\tcanvas.getContext('2d').fillRect(0, 0, width, height)\r\n\t\tlet stream = canvas.captureStream()\r\n\t\treturn Object.assign(stream.getVideoTracks()[0], { enabled: false })\r\n\t}\r\n\r\n\thandleVideo = () => this.setState({ video: !this.state.video }, () => this.getUserMedia())\r\n\thandleAudio = () => this.setState({ audio: !this.state.audio }, () => this.getUserMedia())\r\n\thandleScreen = () => this.setState({ screen: !this.state.screen }, () => this.getDislayMedia())\r\n\r\n\thandleEndCall = () => {\r\n\t\ttry {\r\n\t\t\tlet tracks = this.localVideoref.current.srcObject.getTracks()\r\n\t\t\ttracks.forEach(track => track.stop())\r\n\t\t} catch (e) {}\r\n\t\twindow.location.href = \"/\"\r\n\t}\r\n\r\n\topenChat = () => this.setState({ showModal: true, newmessages: 0 })\r\n\tcloseChat = () => this.setState({ showModal: false })\r\n\thandleMessage = (e) => this.setState({ message: e.target.value })\r\n\r\n\taddMessage = (data, sender, socketIdSender) => {\r\n\t\tthis.setState(prevState => ({\r\n\t\t\tmessages: [...prevState.messages, { \"sender\": sender, \"data\": data }],\r\n\t\t}))\r\n\t\tif (socketIdSender !== socketId) {\r\n\t\t\tthis.setState({ newmessages: this.state.newmessages + 1 })\r\n\t\t}\r\n\t}\r\n\r\n\thandleUsername = (e) => this.setState({ username: e.target.value })\r\n\r\n\tsendMessage = () => {\r\n\t\tsocket.emit('chat-message', this.state.message, this.state.username)\r\n\t\tthis.setState({ message: \"\", sender: this.state.username })\r\n\t}\r\n\r\n\tcopyUrl = () => {\r\n\t\tlet text = window.location.href\r\n\t\tif (!navigator.clipboard) {\r\n\t\t\tlet textArea = document.createElement(\"textarea\")\r\n\t\t\ttextArea.value = text\r\n\t\t\tdocument.body.appendChild(textArea)\r\n\t\t\ttextArea.focus()\r\n\t\t\ttextArea.select()\r\n\t\t\ttry {\r\n\t\t\t\tdocument.execCommand('copy')\r\n\t\t\t\tmessage.success(\"Link copied to clipboard!\")\r\n\t\t\t} catch (err) {\r\n\t\t\t\tmessage.error(\"Failed to copy\")\r\n\t\t\t}\r\n\t\t\tdocument.body.removeChild(textArea)\r\n\t\t\treturn\r\n\t\t}\r\n\t\tnavigator.clipboard.writeText(text).then(function () {\r\n\t\t\tmessage.success(\"Link copied to clipboard!\")\r\n\t\t}, () => {\r\n\t\t\tmessage.error(\"Failed to copy\")\r\n\t\t})\r\n\t}\r\n\r\n\tconnect = () => this.setState({ askForUsername: false }, () => this.getMedia())\r\n\r\n\tisChrome = function () {\r\n\t\tlet userAgent = (navigator && (navigator.userAgent || '')).toLowerCase()\r\n\t\tlet vendor = (navigator && (navigator.vendor || '')).toLowerCase()\r\n\t\tlet matchChrome = /google inc/.test(vendor) ? userAgent.match(/(?:chrome|crios)\\/(\\d+)/) : null\r\n\t\t// let matchFirefox = userAgent.match(/(?:firefox|fxios)\\/(\\d+)/)\r\n\t\t// return matchChrome !== null || matchFirefox !== null\r\n\t\treturn matchChrome !== null\r\n\t}\r\n\r\n\trender() {\r\n\t\tif(this.isChrome() === false){\r\n\t\t\treturn (\r\n\t\t\t\t<div style={{background: \"white\", width: \"30%\", height: \"auto\", padding: \"20px\", minWidth: \"400px\",\r\n\t\t\t\t\t\ttextAlign: \"center\", margin: \"auto\", marginTop: \"50px\", justifyContent: \"center\"}}>\r\n\t\t\t\t\t<h1>Sorry, this works only with Google Chrome</h1>\r\n\t\t\t\t</div>\r\n\t\t\t)\r\n\t\t}\r\n\t\treturn (\r\n\t\t\t<div>\r\n\t\t\t\t<nav>\r\n\t\t\t\t\t<div className=\"left-item\">\r\n\t\t\t\t\t\t<img src={home} alt='home'/>\r\n\t\t\t\t\t</div>\r\n      \t\t\t</nav>\r\n\t\t\t\t<div className='sidenav'>\r\n\t\t\t\t\t<div className='sidenav-items'>\r\n\t\t\t\t\t\t<RightLightTooltip title=\"About Us\">\r\n\t\t\t\t\t\t\t<div className='faicon'><i className=\"far fa-question-circle\"></i></div>\r\n\t\t\t\t\t\t</RightLightTooltip>\r\n\t\t\t\t\t\t<RightLightTooltip title=\"Comment Us\">\r\n\t\t\t\t\t\t\t<div className='faicon'><i className=\"far fa-comment-alt\"></i></div>\r\n\t\t\t\t\t\t</RightLightTooltip>\r\n\t\t\t\t\t\t<RightLightTooltip title=\"Settings\">\r\n\t\t\t\t\t\t\t<div className='faicon'><i className=\"fa fa-cog\"></i></div>\r\n\t\t\t\t\t\t</RightLightTooltip>\r\n\t\t\t\t\t\t<RightLightTooltip title=\"More Options\">\r\n\t\t\t\t\t\t\t<div className='faicon'><i className=\"fa fa-ellipsis-v\"></i></div>\r\n\t\t\t\t\t\t</RightLightTooltip>\r\n\t\t\t\t\t\t<div className='url-copy' style={{ paddingTop: \"0px\" }}>\r\n\t\t\t\t\t\t\t<Input style={{fontSize: '12px', wordWrap: 'wrap'}} value={window.location.href} disable=\"true\"></Input>\r\n\t\t\t\t\t\t\t<button className=\"connect\" onClick={this.copyUrl}>Copy invite link</button>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t{this.state.askForUsername === true ?\r\n\t\t\t\t\t<div>\r\n\t\t\t\t\t\t<div style={{background: \"white\", width: \"30%\", height: \"auto\", padding: \"20px\", minWidth: \"400px\",\r\n\t\t\t\t\t\t\t\ttextAlign: \"center\", margin: \"auto\", marginTop: \"50px\", justifyContent: \"center\"}}>\r\n\t\t\t\t\t\t\t<p style={{ margin: 0, fontWeight: \"bold\", paddingRight: \"50px\" }}>Set your username</p>\r\n\t\t\t\t\t\t\t<Input placeholder=\"Username\" value={this.state.username} onChange={e => this.handleUsername(e)} />\r\n\t\t\t\t\t\t\t<button className='connect' onClick={this.connect}>Connect</button>\r\n\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t<div style={{ justifyContent: \"center\", textAlign: \"center\", paddingTop: \"40px\" }}>\r\n\t\t\t\t\t\t\t<video id=\"my-video\" ref={this.localVideoref} autoPlay muted style={{\r\n\t\t\t\t\t\t\t\tborderStyle: \"solid\",borderColor: \"#bdbdbd\",objectFit: \"fill\",width: \"40%\",height: \"400px\"}}></video>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t:\r\n\t\t\t\t\t<div>\r\n\t\t\t\t\t\t<div className=\"btn-down\" style={{ backgroundColor: \"whitesmoke\", color: \"whitesmoke\", textAlign: \"center\" }}>\r\n\t\t\t\t\t\t\t<IconButton style={{ color: \"#424242\" }} onClick={this.handleVideo}>\r\n\t\t\t\t\t\t\t\t{(this.state.video === true) ? <VideocamIcon /> : <VideocamOffIcon />}\r\n\t\t\t\t\t\t\t</IconButton>\r\n\r\n\t\t\t\t\t\t\t<IconButton style={{ color: \"#f44336\" }} onClick={this.handleEndCall}>\r\n\t\t\t\t\t\t\t\t<CallEndIcon />\r\n\t\t\t\t\t\t\t</IconButton>\r\n\r\n\t\t\t\t\t\t\t<IconButton style={{ color: \"#424242\" }} onClick={this.handleAudio}>\r\n\t\t\t\t\t\t\t\t{this.state.audio === true ? <MicIcon /> : <MicOffIcon />}\r\n\t\t\t\t\t\t\t</IconButton>\r\n\r\n\t\t\t\t\t\t\t{this.state.screenAvailable === true ?\r\n\t\t\t\t\t\t\t\t<IconButton style={{ color: \"#424242\" }} onClick={this.handleScreen}>\r\n\t\t\t\t\t\t\t\t\t{this.state.screen === true ? <ScreenShareIcon /> : <StopScreenShareIcon />}\r\n\t\t\t\t\t\t\t\t</IconButton>\r\n\t\t\t\t\t\t\t\t: null}\r\n\r\n\t\t\t\t\t\t\t<Badge badgeContent={this.state.newmessages} max={999} color=\"secondary\" onClick={this.openChat}>\r\n\t\t\t\t\t\t\t\t<IconButton style={{ color: \"#424242\" }} onClick={this.openChat}>\r\n\t\t\t\t\t\t\t\t\t<ChatIcon />\r\n\t\t\t\t\t\t\t\t</IconButton>\r\n\t\t\t\t\t\t\t</Badge>\r\n\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t<Modal show={this.state.showModal} onHide={this.closeChat} style={{ zIndex: \"999999\" }}>\r\n\t\t\t\t\t\t\t<Modal.Header closeButton>\r\n\t\t\t\t\t\t\t\t<Modal.Title>Chat Room</Modal.Title>\r\n\t\t\t\t\t\t\t</Modal.Header>\r\n\t\t\t\t\t\t\t<Modal.Body style={{ overflow: \"auto\", overflowY: \"auto\", height: \"400px\", textAlign: \"left\" }} >\r\n\t\t\t\t\t\t\t\t{this.state.messages.length > 0 ? this.state.messages.map((item, index) => (\r\n\t\t\t\t\t\t\t\t\t<div key={index} style={{textAlign: \"left\"}}>\r\n\t\t\t\t\t\t\t\t\t\t<p style={{ wordBreak: \"break-all\" }}><b>{item.sender}</b>: {item.data}</p>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t)) : <p>No message yet</p>}\r\n\t\t\t\t\t\t\t</Modal.Body>\r\n\t\t\t\t\t\t\t<Modal.Footer className=\"div-send-msg\">\r\n\t\t\t\t\t\t\t\t<Input placeholder=\"Message\" value={this.state.message} onChange={e => this.handleMessage(e)} />\r\n\t\t\t\t\t\t\t\t<Button variant=\"contained\" color=\"primary\" onClick={this.sendMessage}>Send</Button>\r\n\t\t\t\t\t\t\t</Modal.Footer>\r\n\t\t\t\t\t\t</Modal>\r\n\r\n\t\t\t\t\t\t<div className=\"container\">\r\n\t\t\t\t\t\t\t\r\n\r\n\t\t\t\t\t\t\t<Row id=\"main\" className=\"flex-container\" style={{ margin: 0, padding: 0 }}>\r\n\t\t\t\t\t\t\t\t<video id=\"my-video\" ref={this.localVideoref} autoPlay muted style={{\r\n\t\t\t\t\t\t\t\t\tborderStyle: \"solid\",borderColor: \"#bdbdbd\",margin: \"10px\",objectFit: \"fill\",\r\n\t\t\t\t\t\t\t\t\twidth: \"70%\",height: \"100%\"}}></video>\r\n\t\t\t\t\t\t\t</Row>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t}\r\n\t\t\t</div>\r\n\t\t)\r\n\t}\r\n}\r\n\r\nexport default Video"]},"metadata":{},"sourceType":"module"}